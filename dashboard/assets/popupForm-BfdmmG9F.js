import{e as j,a7 as N,al as Y,a as z,A as B,m as u,Y as c,N as n,o as i,O as s,Z as v,k as C,j as S,s as e,_ as L,T as w,a6 as k,l as t,V as b,U as g,a5 as A,h as R}from"./vue-5rLikWvG.js";import{e as K,x as M,r as W,_ as G}from"./index-CE4S5SW2.js";import{b as p,r as O}from"./validate-BRwK53XH.js";import{F as _}from"./index-BqsO7Sfb.js";import"./index-B3Ea6OYo.js";import"./index-CZNKlKfc.js";const Z={class:"title"},H=j({__name:"popupForm",setup(J){const U=K(),V=N("formRef"),l=Y("baTable"),{t:o}=M.useI18n(),P=z({username:[p({name:"required",title:o("user.user.User name")}),p({name:"account"})],nickname:[p({name:"required",title:o("user.user.nickname")})],group_id:[p({name:"required",message:o("Please select field",{field:o("user.user.group")})})],email:[p({name:"email",title:o("user.user.email")})],mobile:[p({name:"mobile"})],password:[{validator:(f,r,m)=>{if(l.form.operate=="Add"){if(!r)return m(new Error(o("Please input field",{field:o("user.user.password")})))}else if(!r)return m();return O(r)?m():m(new Error(o("validate.Please enter the correct password")))},trigger:"blur"}]}),x=f=>{l.toggleForm(),W.push({name:f=="money"?"user/moneyLog":"user/scoreLog",query:{user_id:l.form.items.id}})};return B(()=>l.form.operate,f=>{P.password[0].required=f=="Add"}),(f,r)=>{const m=u("el-input"),d=u("el-form-item"),E=u("el-date-picker"),y=u("el-button"),D=u("el-form"),F=u("el-scrollbar"),q=u("el-dialog"),I=c("drag"),T=c("zoom"),$=c("loading"),h=c("blur");return i(),n(q,{class:"ba-operate-dialog","close-on-click-modal":!1,"destroy-on-close":!0,"model-value":["Add","Edit"].includes(e(l).form.operate),onClose:e(l).toggleForm},{header:s(()=>[v((i(),R("div",Z,[b(g(e(l).form.operate?e(o)(e(l).form.operate):""),1)])),[[I,[".ba-operate-dialog",".el-dialog__header"]],[T,".ba-operate-dialog"]])]),footer:s(()=>[C("div",{style:S("width: calc(100% - "+e(l).form.labelWidth/1.8+"px)")},[t(y,{onClick:r[18]||(r[18]=a=>e(l).toggleForm(""))},{default:s(()=>[b(g(e(o)("Cancel")),1)]),_:1}),v((i(),n(y,{loading:e(l).form.submitLoading,onClick:r[19]||(r[19]=a=>e(l).onSubmit(e(V))),type:"primary"},{default:s(()=>[b(g(e(l).form.operateIds&&e(l).form.operateIds.length>1?e(o)("Save and edit next item"):e(o)("Save")),1)]),_:1},8,["loading"])),[[h]])],4)]),default:s(()=>[v((i(),n(F,{class:"ba-table-form-scrollbar"},{default:s(()=>[C("div",{class:L(["ba-operate-form","ba-"+e(l).form.operate+"-form"]),style:S(e(U).layout.shrink?"":"width: calc(100% - "+e(l).form.labelWidth/2+"px)")},[e(l).form.loading?w("",!0):(i(),n(D,{key:0,ref_key:"formRef",ref:V,onKeyup:r[17]||(r[17]=k(a=>e(l).onSubmit(e(V)),["enter"])),model:e(l).form.items,"label-position":e(U).layout.shrink?"top":"right","label-width":e(l).form.labelWidth+"px",rules:P},{default:s(()=>[t(d,{prop:"username",label:e(o)("user.user.User name")},{default:s(()=>[t(m,{modelValue:e(l).form.items.username,"onUpdate:modelValue":r[0]||(r[0]=a=>e(l).form.items.username=a),type:"string",placeholder:e(o)("Please input field",{field:e(o)("user.user.User name")+"("+e(o)("user.user.Login account")+")"})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(d,{prop:"nickname",label:e(o)("user.user.nickname")},{default:s(()=>[t(m,{modelValue:e(l).form.items.nickname,"onUpdate:modelValue":r[1]||(r[1]=a=>e(l).form.items.nickname=a),type:"string",placeholder:e(o)("Please input field",{field:e(o)("user.user.nickname")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(_,{type:"remoteSelect",label:e(o)("user.user.group"),modelValue:e(l).form.items.group_id,"onUpdate:modelValue":r[2]||(r[2]=a=>e(l).form.items.group_id=a),prop:"group_id",placeholder:e(o)("user.user.group"),"input-attr":{params:{isTree:!0,search:[{field:"status",val:"1",operator:"eq"}]},field:"name",remoteUrl:"/admin/user.Group/index"}},null,8,["label","modelValue","placeholder"]),t(_,{label:e(o)("user.user.avatar"),type:"image",modelValue:e(l).form.items.avatar,"onUpdate:modelValue":r[3]||(r[3]=a=>e(l).form.items.avatar=a)},null,8,["label","modelValue"]),t(d,{prop:"email",label:e(o)("user.user.email")},{default:s(()=>[t(m,{modelValue:e(l).form.items.email,"onUpdate:modelValue":r[4]||(r[4]=a=>e(l).form.items.email=a),type:"string",placeholder:e(o)("Please input field",{field:e(o)("user.user.email")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(d,{prop:"mobile",label:e(o)("user.user.mobile")},{default:s(()=>[t(m,{modelValue:e(l).form.items.mobile,"onUpdate:modelValue":r[5]||(r[5]=a=>e(l).form.items.mobile=a),type:"string",placeholder:e(o)("Please input field",{field:e(o)("user.user.mobile")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(_,{label:e(o)("user.user.Gender"),modelValue:e(l).form.items.gender,"onUpdate:modelValue":r[6]||(r[6]=a=>e(l).form.items.gender=a),type:"radio","input-attr":{border:!0,content:{0:e(o)("Unknown"),1:e(o)("user.user.male"),2:e(o)("user.user.female")}}},null,8,["label","modelValue","input-attr"]),t(d,{label:e(o)("user.user.birthday")},{default:s(()=>[t(E,{class:"w100","value-format":"YYYY-MM-DD",modelValue:e(l).form.items.birthday,"onUpdate:modelValue":r[7]||(r[7]=a=>e(l).form.items.birthday=a),type:"date",placeholder:e(o)("Please select field",{field:e(o)("user.user.birthday")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(l).form.operate=="Edit"?(i(),n(d,{key:0,label:e(o)("user.user.balance")},{default:s(()=>[t(m,{modelValue:e(l).form.items.money,"onUpdate:modelValue":r[9]||(r[9]=a=>e(l).form.items.money=a),readonly:""},{append:s(()=>[t(y,{onClick:r[8]||(r[8]=a=>x("money"))},{default:s(()=>[b(g(e(o)("user.user.Adjustment balance")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])):w("",!0),e(l).form.operate=="Edit"?(i(),n(d,{key:1,label:e(o)("user.user.integral")},{default:s(()=>[t(m,{modelValue:e(l).form.items.score,"onUpdate:modelValue":r[11]||(r[11]=a=>e(l).form.items.score=a),readonly:""},{append:s(()=>[t(y,{onClick:r[10]||(r[10]=a=>x("score"))},{default:s(()=>[b(g(e(o)("user.user.Adjust integral")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])):w("",!0),t(d,{prop:"password",label:e(o)("user.user.password")},{default:s(()=>[t(m,{modelValue:e(l).form.items.password,"onUpdate:modelValue":r[12]||(r[12]=a=>e(l).form.items.password=a),type:"password",autocomplete:"new-password",placeholder:e(l).form.operate=="Add"?e(o)("Please input field",{field:e(o)("user.user.password")}):e(o)("user.user.Please leave blank if not modified")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(d,{prop:"motto",label:e(o)("user.user.Personal signature")},{default:s(()=>[t(m,{onKeyup:[r[13]||(r[13]=k(A(()=>{},["stop"]),["enter"])),r[14]||(r[14]=k(A(a=>e(l).onSubmit(e(V)),["ctrl"]),["enter"]))],modelValue:e(l).form.items.motto,"onUpdate:modelValue":r[15]||(r[15]=a=>e(l).form.items.motto=a),type:"textarea",placeholder:e(o)("Please input field",{field:e(o)("user.user.Personal signature")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(_,{label:e(o)("State"),modelValue:e(l).form.items.status,"onUpdate:modelValue":r[16]||(r[16]=a=>e(l).form.items.status=a),type:"radio","input-attr":{border:!0,content:{disable:e(o)("Disable"),enable:e(o)("Enable")}}},null,8,["label","modelValue","input-attr"])]),_:1},8,["model","label-position","label-width","rules"]))],6)]),_:1})),[[$,e(l).form.loading]])]),_:1},8,["model-value","onClose"])}}}),ae=G(H,[["__scopeId","data-v-1650d1ff"]]);export{ae as default};
