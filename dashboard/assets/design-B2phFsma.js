import{e as Qe,a8 as Xe,a7 as Ve,a as Pe,z as Ze,n as ie,aG as _e,ar as I,m as F,Y as ne,h as b,o as s,k as m,Z as N,l as d,O as c,s as i,N as f,T as C,V as w,U as g,X as S,W as P,ab as el,_ as ll,a5 as B,i as $,a6 as tl,af as Ne,ag as de,H as R}from"./vue-DdIC1N8d.js";import{x as al,e as ol,N as rl,ao as il,ap as nl,a6 as se,aq as Te,_ as dl}from"./index-C3V9u2Ed.js";import{S as De,B as Ue}from"./index-BGiSXJig.js";import{f as D,s as k,d as xe,t as U,g as ce,a as sl,u as cl,b as ul,c as ml,e as Le,h as fl,p as pl,i as bl}from"./index-Cx6mZZjd.js";import{F as p}from"./index-1wj2obtz.js";import{u as gl}from"./terminal-Dkg7p0iR.js";import{b as x,a as yl}from"./validate-BCdw8ftN.js";import"./index-B2cyAL5t.js";import"./index-BASh_3MO.js";const hl={class:"default-main"},Fl={class:"header-config-box"},vl={class:"header"},Cl={class:"header-item-box"},Sl={class:"header-right"},kl={key:0,class:"header-senior-config-box"},wl={class:"header-senior-config-form"},Vl={class:"default-sort-field-box"},Pl=["onClick","data-id"],_l={class:"design-field"},Nl={class:"design-field"},Tl={class:"design-field-right"},Dl={key:0,class:"design-field-empty"},Ul={class:"field-config ba-scroll-style"},xl={key:0,class:"design-field-empty"},Ll={class:"field-inline"},Il={class:"field-inline"},Rl={class:"field-inline"},El={class:"ba-operate-form",style:"width: calc(100% - 80px)"},Al={class:"block-help"},Ml={class:"block-help"},Kl={style:"width: calc(100% - 88px)"},Gl={class:"confirm-generate-dialog-body"},ql={class:"confirm-generate-dialog-footer"},Bl={class:"design-timeline-box"},$l={class:"design-change-tips"},jl={key:1,class:"design-change-tips"},zl={class:"confirm-generate-dialog-footer"},Ol=Qe({__name:"design",setup(Hl){Xe(t=>({"2070dc40":e.error.tableName?"70px":"60px","6904c09d":e.draggingField?"1px dashed var(--el-color-primary)":e.fields.length?"none":"1px dashed var(--el-border-color)"}));let ue=1;const{t:o}=al.useI18n(),j=ol(),M=gl(),z=Ve("formRef"),K=rl(),me=Ve("designWindowRef"),e=Pe({loading:{init:!1,generate:!1,remoteSelect:!1},sync:0,table:{name:"",comment:"",quickSearchField:[],defaultSortField:"",formFields:[],columnFields:[],defaultSortType:"desc",generateRelativePath:"",isCommonModel:0,modelFile:"",controllerFile:"",validateFile:"",webViewsDir:"",databaseConnection:"",designChange:[],rebuild:"No"},fields:[],activateField:-1,fieldCollapseName:["common","base","senior"],remoteSelectPre:{show:!1,index:-1,fieldList:[],modelFileList:[],controllerFileList:[],loading:!1,hideDelField:!1,form:{table:"",pk:"",label:"",joinField:[],sourceConfigType:"crud",remoteUrl:"",modelFile:"",controllerFile:"",primaryTableAlias:""}},showHeaderSeniorConfig:!1,confirmGenerate:{show:!1,menu:!1,table:!1,controller:!1},draggingField:!1,showDesignChangeLog:!1,error:{tableName:"",fieldName:null,fieldNameDuplication:null}}),Ie=t=>{e.activateField=t},Re=t=>{let l=null;for(const n in D){const h=se(D[n],"designType",t);if(h!==!1){l=I(D[n][h]);break}}if(!l||!fe(l,e.activateField))return!1;const r=I(e.fields[e.activateField]);r.designType=t;for(const n in r.table)r.table[n]=r.table[n].value;for(const n in r.form)r.form[n]=r.form[n].value;e.fields[e.activateField]=E(r),Ne.confirm(o("crud.crud.Reset generate type attr"),o("Reminder"),{confirmButtonText:o("Confirm")+o("Reset"),cancelButtonText:o("crud.crud.Design efficiency"),type:"warning",closeOnClickModal:!1}).then(()=>{_();const n=e.fields[e.activateField].name;e.fields[e.activateField]=E(l),e.fields[e.activateField].name=n,pe(n),l.primaryKey&&(e.table.defaultSortField=l.name,e.table.quickSearchField.push(l.name)),l.designType=="weigh"&&(e.table.defaultSortField=l.name),["remoteSelect","remoteSelects"].includes(l.designType)&&J(e.activateField,!0),l.formBuildExclude||e.table.formFields.push(l.name),l.tableBuildExclude||e.table.columnFields.push(l.name)}).catch(()=>{})},O=(t,l)=>{if(se(e.fields,"name",t)!==!1){e.error.fieldNameDuplication=de({message:o("crud.crud.Rename failed")+"："+o("crud.crud.Field name duplication",{field:t}),type:"error"});return}const n=e.fields[l].name;e.fields[l].name=t;for(const h in U)for(const v in e.table[U[h]])e.table[U[h]][v]==n&&(e.table[U[h]][v]=t);e.table.defaultSortField&&e.table.defaultSortField==n&&(e.table.defaultSortField=t),A({type:"change-field-name",index:e.activateField,oldName:n,newName:t}),H("ElMessage"),Y("ElMessage")},fe=(t,l=-1)=>t.primaryKey===!0&&e.fields.find((n,h)=>l>-1&&h==l?!1:n.primaryKey)?(R({type:"error",message:o("crud.crud.There can only be one primary key field")}),!1):!0,H=t=>{e.error.fieldName&&(e.error.fieldName.close(),e.error.fieldName=null);for(const l in e.fields)if(!yl(e.fields[l].name)){let r=o("crud.crud.Field name is invalid It starts with a letter or underscore and cannot contain any character other than letters, digits, or underscores",{field:e.fields[l].name});return t=="ElMessage"?e.error.fieldName=de({message:r,type:"error",duration:0}):R({type:"error",message:r}),!1}return!0},Y=t=>{e.error.fieldNameDuplication&&(e.error.fieldNameDuplication.close(),e.error.fieldNameDuplication=null);for(const l in e.fields){let r=0;for(const n in e.fields)if(e.fields[l].name==e.fields[n].name&&r++,r>1){let h=o("crud.crud.Field name duplication",{field:e.fields[l].name});return t=="ElMessage"?e.error.fieldNameDuplication=de({message:h,type:"error",duration:0}):R({type:"error",message:h}),!1}}return!0},_=()=>{A({type:"change-field-attr",index:e.activateField,oldName:e.fields[e.activateField].name,newName:""})},pe=t=>{t==e.table.defaultSortField&&(e.table.defaultSortField="");for(const l in U){const r=e.table[U[l]].findIndex(n=>n==t);r!=-1&&e.table[U[l]].splice(r,1)}},be=t=>{e.fields[t]&&(e.activateField=-1,pe(e.fields[t].name),A({type:"del-field",oldName:e.fields[t].name,newName:""}),e.fields.splice(t,1),H("ElMessage"),Y("ElMessage"))},J=(t,l=!1)=>{e.remoteSelectPre.show=!0,e.remoteSelectPre.loading=!0,e.remoteSelectPre.index=t,e.remoteSelectPre.hideDelField=l,e.fields[t]&&e.fields[t].form["remote-table"].value&&(e.remoteSelectPre.form.table=e.fields[t].form["remote-table"].value,e.remoteSelectPre.form.pk=e.fields[t].form["remote-pk"].value,e.remoteSelectPre.form.label=e.fields[t].form["remote-field"].value,e.remoteSelectPre.form.controllerFile=e.fields[t].form["remote-controller"].value,e.remoteSelectPre.form.modelFile=e.fields[t].form["remote-model"].value,e.remoteSelectPre.form.remoteUrl=e.fields[t].form["remote-url"].value,e.remoteSelectPre.form.sourceConfigType=e.fields[t].form["remote-source-config-type"].value,e.remoteSelectPre.form.primaryTableAlias=e.fields[t].form["remote-primary-table-alias"].value,e.remoteSelectPre.form.joinField=e.fields[t].form["relation-fields"].value.split(","),Te(e.fields[t].form["remote-table"].value,!0,e.table.databaseConnection).then(r=>{const n={};for(const h in r.data.fieldList)n[h]=(h?h+" - ":"")+r.data.fieldList[h];e.remoteSelectPre.fieldList=n}),($(e.remoteSelectPre.modelFileList)||$(e.remoteSelectPre.controllerFileList))&&ce(e.fields[t].form["remote-table"].value).then(r=>{e.remoteSelectPre.modelFileList=r.data.modelFileList,e.remoteSelectPre.controllerFileList=r.data.controllerFileList})),e.remoteSelectPre.loading=!1},Ee=(t,l)=>{if(["remoteSelect","remoteSelects"].includes(l.designType))return J(t)},W=()=>{e.confirmGenerate.show=!1},Q=()=>{e.loading.generate=!0;const t=I(e.fields);for(const l in t){for(const r in t[l].table)t[l].table[r]=t[l].table[r].value;for(const r in t[l].form)t[l].form[r]=t[l].form[r].value}sl({type:k.type,table:e.table,fields:t}).then(l=>{const r=()=>{const n=e.table.webViewsDir.replace(/^web/,".");M.toggle(!0),M.addTask("npx.prettier",!1,n,()=>{M.toggle(!1),M.toggleDot(!0),ie(()=>{R({type:"error",message:o("crud.crud.Vite hot warning")})})})};e.sync>0&&j.crud.syncedUpdate==="yes"||e.sync==0&&j.crud.syncType=="automatic"?cl({logs:[{...l.data.crudLog,public:j.crud.syncAutoPublic==="yes"?1:0,newLog:1}],save:1}).then(n=>{ul({syncIds:n.data.syncIds}).finally(()=>{r()})}).catch(()=>{r()}):r()}).finally(()=>{e.loading.generate=!1,W()})},Ae=()=>{if(!H("ElNotification")||!Y("ElNotification"))return;let t="";if(e.fields.findIndex(r=>r.primaryKey)===-1&&(t=o("crud.crud.Please design the primary key field!")),e.table.name||(t=o("crud.crud.Please enter the data table name!")),e.error.tableName&&(t=o("crud.crud.Please enter the correct table name!")),t){R({type:"error",message:t});return}e.loading.generate=!0,ml({table:e.table.name,connection:e.table.databaseConnection,webViewsDir:e.table.webViewsDir,controllerFile:e.table.controllerFile}).then(()=>{Q()}).catch(r=>{e.loading.generate=!1,r.code==-1?(e.confirmGenerate.menu=r.data.menu,e.confirmGenerate.table=r.data.table,e.confirmGenerate.controller=r.data.controller,ge()||e.confirmGenerate.controller||e.confirmGenerate.menu?e.confirmGenerate.show=!0:Q()):R({type:"error",message:r.msg})})},ge=()=>e.confirmGenerate.table&&(k.type=="create"||e.table.rebuild=="Yes"),Me=()=>{if(!e.table.name&&!e.table.comment&&!e.fields.length)return Le("start");Ne.confirm(o("crud.crud.It is irreversible to give up the design Are you sure you want to give up?"),o("Reminder"),{confirmButtonText:o("crud.crud.give up"),cancelButtonText:o("Cancel"),type:"warning"}).then(()=>{Le("start")}).catch(()=>{})},E=t=>{const l=I(xe[t.designType]);for(const r in t.form)l.form[r]&&(l.form[r].value=t.form[r]),r=="image-multi"&&t.form[r]&&(l.table.render=fl("render","images"));for(const r in t.table)l.table[r]&&(l.table[r].value=t.table[r]);return t.form=l.form,t.table=l.table,t},ye=t=>{if(_(),["enum","set"].includes(e.fields[e.activateField].type)){if(!t){e.fields[e.activateField].dataType=`${e.fields[e.activateField].type}()`;return}t=t.replaceAll("：",":"),t=t.replaceAll("，",",");let l=t.split(":");l[1]&&(l=l[1].split(","),l=l.map(r=>{if(!r)return"";let n=r.split("=");return n[0]&&n[1]?`'${n[0]}'`:""}).filter(r=>r!=""),e.fields[e.activateField].dataType=`${e.fields[e.activateField].type}(${l.join(",")})`)}},Ke=()=>{if(X(),!!["db","sql","log"].includes(k.type)){if(e.loading.init=!0,k.type=="log"){pl(k.startData.logId,k.startData.logType).then(t=>{e.sync=t.data.sync,e.table=t.data.table,X(),t.data.table.empty&&(e.table.rebuild="Yes"),e.table.isCommonModel=parseInt(t.data.table.isCommonModel),e.table.databaseConnection=t.data.table.databaseConnection?t.data.table.databaseConnection:"";const l=t.data.fields;for(const r in l){const n=E(I(l[r]));typeof n.defaultType>"u"&&(n.default&&["none","null","empty string"].includes(n.default)?(n.defaultType=n.default.toUpperCase(),n.default=""):n.defaultType="INPUT"),e.fields.push(n)}}).finally(()=>{e.loading.init=!1});return}bl({type:k.type,table:k.startData.table,sql:k.startData.sql,connection:k.startData.databaseConnection}).then(t=>{let l=[];for(const r in t.data.columns){const n=E(t.data.columns[r]);["id","update_time","create_time","updatetime","createtime"].includes(n.name)||e.table.formFields.push(n.name),["textarea","file","files","editor","password","array"].includes(n.designType)||e.table.columnFields.push(n.name),n.designType=="pk"&&(e.table.defaultSortField=n.name,e.table.quickSearchField.push(n.name)),n.designType=="weigh"&&(e.table.defaultSortField=n.name),l.push(n)}e.fields=l,e.table.comment=t.data.comment,e.table.databaseConnection=k.startData.databaseConnection,t.data.empty&&(e.table.rebuild="Yes"),k.type=="db"&&k.startData.table&&(e.table.name=k.startData.table,G(k.startData.table))}).finally(()=>{e.loading.init=!1})}},he=t=>se(e.fields,"name",t)!==!1?(t+=ue,ue++,he(t)):t;Ze(()=>{Ke();const t=De.create(me.value,{group:"design-field",animation:200,filter:".design-field-empty",onAdd:l=>{var h,v;const r=(v=(h=l.originalEvent)==null?void 0:h.dataTransfer)==null?void 0:v.getData("name"),n=D[r];if(n&&n[l.oldIndex]){const y=E(I(n[l.oldIndex]));if(y.primaryKey)if(fe(y))e.table.defaultSortField=y.name,e.table.quickSearchField.push(y.name);else return l.item.remove();y.designType=="weigh"&&(e.table.defaultSortField=y.name),y.name=he(y.name),e.fields.splice(l.newIndex,0,y),A({type:"add-field",index:l.newIndex,newName:y.name,oldName:"",after:l.newIndex===0?"FIRST FIELD":e.fields[l.newIndex-1].name}),["remoteSelect","remoteSelects"].includes(y.designType)&&J(l.newIndex,!0),y.formBuildExclude||e.table.formFields.push(y.name),y.tableBuildExclude||e.table.columnFields.push(y.name)}l.item.remove(),ie(()=>{t.sort(_e(e.fields.length).map(y=>y.toString()))})},onEnd:l=>{const r=e.fields[l.oldIndex];e.fields.splice(l.oldIndex,1),e.fields.splice(l.newIndex,0,r),A({type:"change-field-order",index:l.newIndex,newName:"",oldName:r.name,after:l.newIndex===0?"FIRST FIELD":e.fields[l.newIndex-1].name}),ie(()=>{t.sort(_e(e.fields.length).map(n=>n.toString()))})}});K.value.forEach((l,r)=>{De.create(l,{sort:!1,group:{name:"design-field",pull:"clone",put:!1},animation:200,setData:n=>{n.setData("name",Object.keys(D)[r])},onStart:()=>{e.draggingField=!0},onEnd:()=>{e.draggingField=!1}})})});const Ge=t=>{if(!t)return e.error.tableName="";/^[a-z_][a-z0-9_]*$/.test(t)?(e.error.tableName="",G(t)):e.error.tableName=o("crud.crud.Use lower case underlined for table names"),X()},X=()=>{e.table.rebuild="No",e.table.designChange=[]},G=t=>{t&&ce(t,e.table.isCommonModel).then(l=>{e.table.modelFile=l.data.modelFile,e.table.controllerFile=l.data.controllerFile,e.table.validateFile=l.data.validateFile,e.table.webViewsDir=l.data.webViewsDir,e.table.generateRelativePath=t.replaceAll("/","\\")})},qe=()=>{G(e.table.generateRelativePath)},Be=()=>{e.remoteSelectPre.form.table&&(Z(["table"]),e.loading.remoteSelect=!0,Te(e.remoteSelectPre.form.table,!0,e.table.databaseConnection).then(t=>{e.remoteSelectPre.form.pk=t.data.pk;const l=["name","title","username","nickname"];for(const n in t.data.fieldList)if(l.includes(n)){e.remoteSelectPre.form.label=n,e.remoteSelectPre.form.joinField.push(n);break}const r={};for(const n in t.data.fieldList)r[n]=(n?n+" - ":"")+t.data.fieldList[n];e.remoteSelectPre.fieldList=r}).finally(()=>{e.loading.remoteSelect=!1}),ce(e.remoteSelectPre.form.table).then(t=>{e.remoteSelectPre.modelFileList=t.data.modelFileList,e.remoteSelectPre.controllerFileList=t.data.controllerFileList,Object.keys(t.data.modelFileList).includes(t.data.modelFile)&&(e.remoteSelectPre.form.modelFile=t.data.modelFile),Object.keys(t.data.controllerFileList).includes(t.data.controllerFile)&&(e.remoteSelectPre.form.controllerFile=t.data.controllerFile)}))},Fe=()=>{const t=()=>{if(e.fields[e.remoteSelectPre.index].name=="remote_select"){const l=e.remoteSelectPre.form.table+(e.fields[e.remoteSelectPre.index].designType=="remoteSelect"?"_id":"_ids");O(l,e.remoteSelectPre.index)}e.fields[e.remoteSelectPre.index].form["remote-table"].value=e.remoteSelectPre.form.table,e.fields[e.remoteSelectPre.index].form["remote-pk"].value=e.remoteSelectPre.form.pk,e.fields[e.remoteSelectPre.index].form["remote-field"].value=e.remoteSelectPre.form.label,e.fields[e.remoteSelectPre.index].form["remote-controller"].value=e.remoteSelectPre.form.controllerFile,e.fields[e.remoteSelectPre.index].form["remote-model"].value=e.remoteSelectPre.form.modelFile,e.fields[e.remoteSelectPre.index].form["remote-url"].value=e.remoteSelectPre.form.remoteUrl,e.fields[e.remoteSelectPre.index].form["remote-source-config-type"].value=e.remoteSelectPre.form.sourceConfigType,e.fields[e.remoteSelectPre.index].form["remote-primary-table-alias"].value=e.remoteSelectPre.form.primaryTableAlias,e.fields[e.remoteSelectPre.index].form["relation-fields"].value=e.fields[e.remoteSelectPre.index].designType=="remoteSelect"?e.remoteSelectPre.form.joinField.join(","):e.remoteSelectPre.form.label,e.remoteSelectPre.index=-1,e.remoteSelectPre.show=!1,Z()};z.value&&z.value.validate(l=>{l&&t()})},ve=()=>{e.remoteSelectPre.show=!1,Z(),e.remoteSelectPre.index!==-1&&e.remoteSelectPre.hideDelField&&be(e.remoteSelectPre.index)},Z=(t=[])=>{for(const l in e.remoteSelectPre.form)t.includes(l)||(l=="joinField"?e.remoteSelectPre.form[l]=[]:l=="sourceConfigType"?e.remoteSelectPre.form[l]="crud":e.remoteSelectPre.form[l]="")},$e=Pe({table:[x({name:"required",title:o("crud.crud.remote-table")})],pk:[x({name:"required",title:o("crud.crud.Drop down value field")})],label:[x({name:"required",title:o("crud.crud.Drop down label field")})],joinField:[x({name:"required",title:o("crud.crud.Fields displayed in the table")})],controllerFile:[x({name:"required",title:o("crud.crud.Controller position")})],modelFile:[x({name:"required",title:o("crud.crud.Data Model Location")})],remoteUrl:[x({name:"required",title:o("crud.crud.remote-url")})]}),A=t=>{if(k.type=="create")return;let l=!0;if(t.type=="change-field-name"){for(const r in e.table.designChange)e.table.designChange[r].type=="change-field-attr"&&t.oldName==e.table.designChange[r].oldName&&(e.table.designChange[r].oldName=t.newName),e.table.designChange[r].type=="change-field-order"&&t.oldName==e.table.designChange[r].oldName&&(e.table.designChange[r].oldName=t.newName),e.table.designChange[r].after==t.oldName&&(e.table.designChange[r].after=t.newName);for(const r in e.table.designChange){if(e.table.designChange[r].type=="add-field"&&e.table.designChange[r].newName==t.oldName){e.table.designChange[r].newName=t.newName,l=!1;break}if(e.table.designChange[r].type=="change-field-name"&&e.table.designChange[r].newName==t.oldName){t.oldName=e.table.designChange[r].oldName,e.table.designChange[r]=t,e.table.designChange[r].newName==e.table.designChange[r].oldName&&e.table.designChange.splice(r,1),l=!1;break}}}else if(t.type=="del-field"){let r=!1;e.table.designChange=e.table.designChange.filter(n=>{r=n.type=="add-field"&&n.newName==t.oldName;const h=n.type=="change-field-name"&&n.newName==t.oldName,v=n.type=="change-field-attr"&&n.oldName==t.oldName,y=n.type=="change-field-order"&&n.oldName==t.oldName;return h&&(t.oldName=n.oldName),!r&&!h&&!v&&!y}),r&&(l=!1);for(const n in e.table.designChange)if(e.table.designChange[n].type=="del-field"&&e.table.designChange[n].oldName==t.oldName){l=!1;break}}else if(t.type=="change-field-attr")for(const r in e.table.designChange){if(e.table.designChange[r].type=="change-field-attr"&&e.table.designChange[r].oldName==t.oldName){l=!1;break}if(e.table.designChange[r].type=="add-field"&&e.table.designChange[r].newName==t.oldName){l=!1;break}}else if(t.type=="change-field-order")for(const r in e.table.designChange){if(e.table.designChange[r].type=="add-field"&&e.table.designChange[r].newName==t.oldName){e.table.designChange[r].after=t.after,l=!1;break}if(e.table.designChange[r].type=="change-field-order"&&e.table.designChange[r].oldName==t.oldName){e.table.designChange[r]=t,l=!1;break}}t.sync=!0,l&&e.table.designChange.push(t)},je=t=>{switch(t.type){case"add-field":return o("crud.crud.Add field")+" "+t.newName;case"change-field-attr":return o("crud.crud.Modify field properties")+" "+t.oldName;case"change-field-name":return o("crud.crud.Modify field name")+" "+t.oldName+" => "+t.newName;case"del-field":return o("crud.crud.Delete field")+" "+t.oldName;case"change-field-order":return o("crud.crud.Modify field order")+" "+t.oldName+" => "+(t.after=="FIRST FIELD"?o("crud.crud.First field"):t.after+" "+o("crud.crud.After"));default:return o("Unknown")}},ze=t=>{let l="";switch(t){case"change-field-name":l="warning";break;case"del-field":l="danger";break;case"add-field":l="primary";break;case"change-field-attr":l="success";break;case"change-field-order":l="info";break;default:l="success";break}return l};return(t,l)=>{const r=F("el-link"),n=F("el-button"),h=F("el-row"),v=F("el-option"),y=F("el-select"),T=F("el-form-item"),Ce=F("el-checkbox"),Se=F("el-input"),ee=F("Icon"),le=F("el-collapse-item"),Oe=F("el-collapse"),te=F("el-col"),q=F("el-divider"),ke=F("el-form"),He=F("el-text"),we=F("el-scrollbar"),ae=F("el-dialog"),oe=F("el-alert"),Ye=F("el-timeline-item"),Je=F("el-timeline"),L=ne("blur"),re=ne("loading"),We=ne("drag");return s(),b("div",hl,[m("div",Fl,[d(h,{class:"header-box"},{default:c(()=>[m("div",vl,[m("div",Cl,[d(p,{class:"mr-20 table-name-item",label:i(o)("crud.log.table_name"),modelValue:e.table.name,"onUpdate:modelValue":l[0]||(l[0]=a=>e.table.name=a),type:"string",placeholder:i(o)("crud.crud.Name of the data table"),"input-attr":{onChange:Ge},error:e.error.tableName},null,8,["label","modelValue","placeholder","input-attr","error"]),d(p,{class:"table-comment-item",label:i(o)("crud.crud.Data Table Notes"),modelValue:e.table.comment,"onUpdate:modelValue":l[1]||(l[1]=a=>e.table.comment=a),type:"string",placeholder:i(o)("crud.crud.For example: `user table` will be generated into `user management`")},null,8,["label","modelValue","placeholder"])]),m("div",Sl,[i(k).type!="create"?(s(),f(r,{key:0,onClick:l[2]||(l[2]=a=>e.showDesignChangeLog=!0),class:"design-change-log",type:"primary"},{default:c(()=>[w(g(i(o)("crud.crud.Table design change")),1)]),_:1})):C("",!0),N((s(),f(n,{type:"primary",loading:e.loading.generate,onClick:Ae},{default:c(()=>[w(g(i(o)("crud.crud.Generate CRUD code")),1)]),_:1},8,["loading"])),[[L]]),N((s(),f(n,{onClick:Me,type:"danger"},{default:c(()=>[w(g(i(o)("crud.crud.give up")),1)]),_:1})),[[L]])])])]),_:1}),d(el,{name:e.showHeaderSeniorConfig?"el-zoom-in-top":"el-zoom-in-bottom"},{default:c(()=>[e.showHeaderSeniorConfig?(s(),b("div",kl,[m("div",wl,[d(T,{"label-width":140,label:i(o)("crud.crud.Table Quick Search Fields")},{default:c(()=>[d(y,{clearable:!0,multiple:!0,class:"w100",modelValue:e.table.quickSearchField,"onUpdate:modelValue":l[3]||(l[3]=a=>e.table.quickSearchField=a),placement:"bottom"},{default:c(()=>[(s(!0),b(S,null,P(e.fields,(a,u)=>(s(),f(v,{key:u,label:a.name+(a.comment?"-"+a.comment:a.title),value:a.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),m("div",Vl,[d(T,{"label-width":140,class:"default-sort-field",label:i(o)("crud.crud.Table Default Sort Fields")},{default:c(()=>[d(y,{clearable:!0,modelValue:e.table.defaultSortField,"onUpdate:modelValue":l[4]||(l[4]=a=>e.table.defaultSortField=a),placement:"bottom"},{default:c(()=>[(s(!0),b(S,null,P(e.fields,(a,u)=>(s(),f(v,{key:u,label:a.name+(a.comment?"-"+a.comment:a.title),value:a.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),d(p,{class:"default-sort-field-type",label:i(o)("crud.crud.sort order"),modelValue:e.table.defaultSortType,"onUpdate:modelValue":l[5]||(l[5]=a=>e.table.defaultSortType=a),type:"select","input-attr":{content:{desc:i(o)("crud.crud.sort order desc"),asc:i(o)("crud.crud.sort order asc")}}},null,8,["label","modelValue","input-attr"])]),d(T,{"label-width":140,label:i(o)("crud.crud.Fields as Table Columns")},{default:c(()=>[d(y,{clearable:!0,multiple:!0,class:"w100",modelValue:e.table.columnFields,"onUpdate:modelValue":l[6]||(l[6]=a=>e.table.columnFields=a),placement:"bottom"},{default:c(()=>[(s(!0),b(S,null,P(e.fields,(a,u)=>(s(),f(v,{key:u,label:a.name+(a.comment?"-"+a.comment:a.title),value:a.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),d(T,{"label-width":140,label:i(o)("crud.crud.Fields as form items")},{default:c(()=>[d(y,{clearable:!0,multiple:!0,class:"w100",modelValue:e.table.formFields,"onUpdate:modelValue":l[7]||(l[7]=a=>e.table.formFields=a),placement:"bottom"},{default:c(()=>[(s(!0),b(S,null,P(e.fields,(a,u)=>(s(),f(v,{key:u,label:a.name+(a.comment?"-"+a.comment:a.title),value:a.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),d(p,{label:i(o)("crud.crud.The relative path to the generated code"),modelValue:e.table.generateRelativePath,"onUpdate:modelValue":l[8]||(l[8]=a=>e.table.generateRelativePath=a),type:"string","label-width":140,"block-help":i(o)("crud.crud.For quick combination code generation location, please fill in the relative path"),"input-attr":{onChange:G}},null,8,["label","modelValue","block-help","input-attr"]),d(p,{label:i(o)("crud.crud.Generated Controller Location"),modelValue:e.table.controllerFile,"onUpdate:modelValue":l[9]||(l[9]=a=>e.table.controllerFile=a),type:"string","label-width":140},null,8,["label","modelValue"]),d(T,{label:i(o)("crud.crud.Generated Data Model Location"),"label-width":140},{default:c(()=>[d(Se,{modelValue:e.table.modelFile,"onUpdate:modelValue":l[11]||(l[11]=a=>e.table.modelFile=a),type:"string"},{append:c(()=>[d(Ce,{onChange:qe,modelValue:e.table.isCommonModel,"onUpdate:modelValue":l[10]||(l[10]=a=>e.table.isCommonModel=a),label:i(o)("crud.crud.Common model"),size:"small","true-value":1,"false-value":0},null,8,["modelValue","label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),d(p,{label:i(o)("crud.crud.Generated Validator Location"),modelValue:e.table.validateFile,"onUpdate:modelValue":l[12]||(l[12]=a=>e.table.validateFile=a),type:"string","label-width":140},null,8,["label","modelValue"]),d(p,{label:i(o)("crud.crud.WEB end view directory"),modelValue:e.table.webViewsDir,"onUpdate:modelValue":l[13]||(l[13]=a=>e.table.webViewsDir=a),type:"string","label-width":140},null,8,["label","modelValue"]),d(p,{label:i(o)("Database connection"),modelValue:e.table.databaseConnection,"onUpdate:modelValue":l[14]||(l[14]=a=>e.table.databaseConnection=a),type:"remoteSelect","label-width":140,"block-help":i(o)("Database connection help"),"input-attr":{pk:"key",field:"key",remoteUrl:i(il)}},null,8,["label","modelValue","block-help","input-attr"])])])):C("",!0)]),_:1},8,["name"]),m("div",{onClick:l[15]||(l[15]=a=>e.showHeaderSeniorConfig=!e.showHeaderSeniorConfig),class:"header-senior-config"},[m("span",null,g(i(o)("crud.crud.Advanced Configuration")),1),d(ee,{class:"senior-config-arrow-icon",size:"14",color:"var(--el-text-color-primary)",name:e.showHeaderSeniorConfig?"el-icon-ArrowUp":"el-icon-ArrowDown"},null,8,["name"])])]),N((s(),f(h,{class:"fields-box",gutter:20},{default:c(()=>[d(te,{xs:24,span:6},{default:c(()=>[d(Oe,{class:"field-collapse",modelValue:e.fieldCollapseName,"onUpdate:modelValue":l[16]||(l[16]=a=>e.fieldCollapseName=a)},{default:c(()=>[d(le,{title:i(o)("crud.crud.Common Fields"),name:"common"},{default:c(()=>[m("div",{class:"field-box",ref:i(K).set},[(s(!0),b(S,null,P(i(D).common,(a,u)=>(s(),b("div",{key:u,class:"field-item"},[m("span",null,g(a.title),1)]))),128))],512)]),_:1},8,["title"]),d(le,{title:i(o)("crud.crud.Base Fields"),name:"base"},{default:c(()=>[m("div",{class:"field-box",ref:i(K).set},[(s(!0),b(S,null,P(i(D).base,(a,u)=>(s(),b("div",{key:u,class:"field-item"},[m("span",null,g(a.title),1)]))),128))],512)]),_:1},8,["title"]),d(le,{title:i(o)("crud.crud.Advanced Fields"),name:"senior"},{default:c(()=>[m("div",{class:"field-box",ref:i(K).set},[(s(!0),b(S,null,P(i(D).senior,(a,u)=>(s(),b("div",{key:u,class:"field-item"},[m("span",null,g(a.title),1)]))),128))],512)]),_:1},8,["title"])]),_:1},8,["modelValue"])]),_:1}),d(te,{xs:24,span:12},{default:c(()=>[m("div",{ref_key:"designWindowRef",ref:me,class:"design-window ba-scroll-style"},[(s(!0),b(S,null,P(e.fields,(a,u)=>(s(),b("div",{key:u,class:ll([u===e.activateField?"activate":"","design-field-box"]),onClick:V=>Ie(u),"data-id":u},[m("div",_l,[m("span",null,g(i(o)("crud.crud.Field Name"))+"：",1),d(Ue,{onPointerdown:l[17]||(l[17]=B(()=>{},["stop"])),class:"design-field-name-input","model-value":a.name,type:"string",attr:{size:"small",onInput:V=>O(V,u)}},null,8,["model-value","attr"])]),m("div",Nl,[m("span",null,g(i(o)("crud.crud.field comment"))+"：",1),d(Ue,{onPointerdown:l[18]||(l[18]=B(()=>{},["stop"])),class:"design-field-name-comment",modelValue:a.comment,"onUpdate:modelValue":V=>a.comment=V,type:"string",attr:{size:"small",onChange:ye}},null,8,["modelValue","onUpdate:modelValue","attr"])]),m("div",Tl,[["remoteSelect","remoteSelects"].includes(a.designType)?N((s(),f(n,{key:0,onClick:B(V=>Ee(u,a),["stop"]),type:"primary",size:"small",circle:""},{default:c(()=>[d(ee,{color:"var(--el-color-white)",size:"15",name:"fa fa-pencil icon"})]),_:2},1032,["onClick"])),[[L]]):C("",!0),N((s(),f(n,{onClick:B(V=>be(u),["stop"]),type:"danger",size:"small",circle:""},{default:c(()=>[d(ee,{color:"var(--el-color-white)",size:"15",name:"fa fa-trash"})]),_:2},1032,["onClick"])),[[L]])])],10,Pl))),128)),!e.fields.length&&!e.draggingField?(s(),b("div",Dl,g(i(o)("crud.crud.Drag the left element here to start designing CRUD")),1)):C("",!0)],512)]),_:1}),d(te,{xs:24,span:6},{default:c(()=>[m("div",Ul,[e.activateField===-1?(s(),b("div",xl,g(i(o)("crud.crud.Please select a field from the left first")),1)):(s(),b("div",{key:"activate-field-"+e.activateField},[d(ke,{"label-position":"top"},{default:c(()=>[d(q,{"content-position":"left"},{default:c(()=>[w(g(i(o)("crud.crud.Common")),1)]),_:1}),d(T,{label:i(o)("crud.crud.Generate type")},{default:c(()=>[d(y,{onChange:l[19]||(l[19]=a=>Re(a)),class:"w100","model-value":e.fields[e.activateField].designType,placement:"bottom"},{default:c(()=>[(s(!0),b(S,null,P(i(xe),(a,u)=>(s(),f(v,{key:u,label:a.name,value:u},null,8,["label","value"]))),128))]),_:1},8,["model-value"])]),_:1},8,["label"]),d(p,{label:i(o)("crud.crud.Field comments (CRUD dictionary)"),type:"textarea","input-attr":{rows:2,onChange:ye},placeholder:i(o)("crud.crud.The field comment will be used as the CRUD dictionary, and will be identified as the field title before the colon, and as the data dictionary after the colon"),modelValue:e.fields[e.activateField].comment,"onUpdate:modelValue":l[20]||(l[20]=a=>e.fields[e.activateField].comment=a)},null,8,["label","input-attr","placeholder","modelValue"]),d(q,{"content-position":"left"},{default:c(()=>[w(g(i(o)("crud.crud.Field Properties")),1)]),_:1}),d(p,{label:i(o)("crud.crud.Field Name"),type:"string","model-value":e.fields[e.activateField].name,"input-attr":{onInput:a=>O(a,e.activateField)}},null,8,["label","model-value","input-attr"]),e.fields[e.activateField].dataType?(s(),f(p,{key:0,label:i(o)("crud.crud.Field Type"),"input-attr":{onChange:_},type:"textarea",modelValue:e.fields[e.activateField].dataType,"onUpdate:modelValue":l[21]||(l[21]=a=>e.fields[e.activateField].dataType=a)},null,8,["label","input-attr","modelValue"])):(s(),b(S,{key:1},[d(p,{label:i(o)("crud.crud.Field Type"),"input-attr":{onChange:_},type:"string",modelValue:e.fields[e.activateField].type,"onUpdate:modelValue":l[22]||(l[22]=a=>e.fields[e.activateField].type=a)},null,8,["label","input-attr","modelValue"]),m("div",Ll,[d(p,{label:i(o)("crud.crud.length"),type:"number",modelValue:e.fields[e.activateField].length,"onUpdate:modelValue":l[23]||(l[23]=a=>e.fields[e.activateField].length=a),"input-attr":{onChange:_}},null,8,["label","modelValue","input-attr"]),d(p,{label:i(o)("crud.crud.decimal point"),type:"number",modelValue:e.fields[e.activateField].precision,"onUpdate:modelValue":l[24]||(l[24]=a=>e.fields[e.activateField].precision=a),"input-attr":{onChange:_}},null,8,["label","modelValue","input-attr"])])],64)),d(T,{label:i(o)("crud.crud.Field Defaults")},{default:c(()=>[d(y,{modelValue:e.fields[e.activateField].defaultType,"onUpdate:modelValue":l[25]||(l[25]=a=>e.fields[e.activateField].defaultType=a)},{default:c(()=>[d(v,{label:"手动输入",value:"INPUT"}),d(v,{label:"EMPTY STRING（空字符串）",value:"EMPTY STRING"}),d(v,{label:"NULL",value:"NULL"}),d(v,{label:"无（不设默认值）",value:"NONE"})]),_:1},8,["modelValue"]),e.fields[e.activateField].defaultType=="INPUT"?(s(),f(Se,{key:0,placeholder:i(o)("crud.crud.Please input the default value"),type:"text",modelValue:e.fields[e.activateField].default,"onUpdate:modelValue":l[26]||(l[26]=a=>e.fields[e.activateField].default=a),onChange:_,class:"default-input"},null,8,["placeholder","modelValue"])):C("",!0)]),_:1},8,["label"]),m("div",Il,[d(p,{class:"form-item-position-right",label:i(o)("crud.state.Primary key"),type:"switch",modelValue:e.fields[e.activateField].primaryKey,"onUpdate:modelValue":l[27]||(l[27]=a=>e.fields[e.activateField].primaryKey=a),"input-attr":{onChange:_}},null,8,["label","modelValue","input-attr"]),d(p,{class:"form-item-position-right",label:i(o)("crud.crud.Auto increment"),type:"switch",modelValue:e.fields[e.activateField].autoIncrement,"onUpdate:modelValue":l[28]||(l[28]=a=>e.fields[e.activateField].autoIncrement=a),"input-attr":{onChange:_}},null,8,["label","modelValue","input-attr"])]),m("div",Rl,[d(p,{class:"form-item-position-right",label:i(o)("crud.crud.Unsigned"),type:"switch",modelValue:e.fields[e.activateField].unsigned,"onUpdate:modelValue":l[29]||(l[29]=a=>e.fields[e.activateField].unsigned=a),"input-attr":{onChange:_}},null,8,["label","modelValue","input-attr"]),d(p,{class:"form-item-position-right",label:i(o)("crud.crud.Allow NULL"),type:"switch",modelValue:e.fields[e.activateField].null,"onUpdate:modelValue":l[30]||(l[30]=a=>e.fields[e.activateField].null=a),"input-attr":{onChange:_}},null,8,["label","modelValue","input-attr"])]),i($)(e.fields[e.activateField].table)?C("",!0):(s(),b(S,{key:2},[d(q,{"content-position":"left"},{default:c(()=>[w(g(i(o)("crud.crud.Field Table Properties")),1)]),_:1}),(s(!0),b(S,null,P(e.fields[e.activateField].table,(a,u)=>(s(),f(p,{key:u,label:t.$t("crud.crud."+u),type:a.type,modelValue:e.fields[e.activateField].table[u].value,"onUpdate:modelValue":V=>e.fields[e.activateField].table[u].value=V,placeholder:e.fields[e.activateField].table[u].placeholder??"","input-attr":{content:e.fields[e.activateField].table[u].options??{},...e.fields[e.activateField].table[u].attr??{}}},null,8,["label","type","modelValue","onUpdate:modelValue","placeholder","input-attr"]))),128))],64)),i($)(e.fields[e.activateField].form)?C("",!0):(s(),b(S,{key:3},[d(q,{"content-position":"left"},{default:c(()=>[w(g(i(o)("crud.crud.Field Form Properties")),1)]),_:1}),(s(!0),b(S,null,P(e.fields[e.activateField].form,(a,u)=>(s(),b(S,{key:u},[a.type!="hidden"?(s(),f(p,{key:0,label:t.$t("crud.crud."+u),type:a.type,modelValue:e.fields[e.activateField].form[u].value,"onUpdate:modelValue":V=>e.fields[e.activateField].form[u].value=V,placeholder:e.fields[e.activateField].form[u].placeholder??"","input-attr":{content:e.fields[e.activateField].form[u].options??{},...e.fields[e.activateField].form[u].attr??{}}},null,8,["label","type","modelValue","onUpdate:modelValue","placeholder","input-attr"])):C("",!0)],64))),128))],64))]),_:1})]))])]),_:1})]),_:1})),[[re,e.loading.init]]),d(ae,{onClose:ve,class:"ba-operate-dialog","model-value":e.remoteSelectPre.show,title:i(o)("crud.crud.Remote drop-down association information"),"close-on-click-modal":!1,"destroy-on-close":!0,onKeyup:tl(Fe,["enter"])},{footer:c(()=>[m("div",Kl,[d(n,{onClick:ve},{default:c(()=>[w(g(t.$t("Cancel")),1)]),_:1}),N((s(),f(n,{onClick:Fe,type:"primary"},{default:c(()=>[w(g(t.$t("Save")),1)]),_:1})),[[L]])])]),default:c(()=>[d(we,{"max-height":"60vh"},{default:c(()=>[m("div",El,[e.remoteSelectPre.index!=-1&&e.fields[e.remoteSelectPre.index]?N((s(),f(ke,{key:0,ref_key:"formRef",ref:z,model:e.remoteSelectPre.form,rules:$e,"label-position":"right","label-width":"160px"},{default:c(()=>[(s(),f(p,{label:i(o)("crud.crud.Associated Data Table"),modelValue:e.remoteSelectPre.form.table,"onUpdate:modelValue":l[31]||(l[31]=a=>e.remoteSelectPre.form.table=a),type:"remoteSelect",key:e.table.databaseConnection,"input-attr":{pk:"table",field:"comment",params:{connection:e.table.databaseConnection,samePrefix:1,excludeTable:["area","token","captcha","admin_group_access","config","admin_log","user_money_log","user_score_log"]},remoteUrl:i(nl),onChange:Be},prop:"table"},null,8,["label","modelValue","input-attr"])),N((s(),b("div",null,[(s(),f(p,{prop:"pk",type:"select",label:i(o)("crud.crud.Drop down value field"),modelValue:e.remoteSelectPre.form.pk,"onUpdate:modelValue":l[32]||(l[32]=a=>e.remoteSelectPre.form.pk=a),placeholder:i(o)("crud.crud.Please select the value field of the select component"),key:"select-value"+JSON.stringify(e.remoteSelectPre.fieldList),"input-attr":{content:e.remoteSelectPre.fieldList}},null,8,["label","modelValue","placeholder","input-attr"])),(s(),f(p,{prop:"label",type:"select",label:i(o)("crud.crud.Drop down label field"),modelValue:e.remoteSelectPre.form.label,"onUpdate:modelValue":l[33]||(l[33]=a=>e.remoteSelectPre.form.label=a),placeholder:i(o)("crud.crud.Please select the label field of the select component"),key:"select-label"+JSON.stringify(e.remoteSelectPre.fieldList),"input-attr":{content:e.remoteSelectPre.fieldList}},null,8,["label","modelValue","placeholder","input-attr"])),e.fields[e.remoteSelectPre.index].designType=="remoteSelect"?(s(),f(p,{prop:"joinField",type:"selects",label:i(o)("crud.crud.Fields displayed in the table"),modelValue:e.remoteSelectPre.form.joinField,"onUpdate:modelValue":l[34]||(l[34]=a=>e.remoteSelectPre.form.joinField=a),placeholder:i(o)("crud.crud.Please select the fields displayed in the table"),key:"join-field"+JSON.stringify(e.remoteSelectPre.fieldList),"input-attr":{content:e.remoteSelectPre.fieldList}},null,8,["label","modelValue","placeholder","input-attr"])):C("",!0),d(p,{label:i(o)("crud.crud.Data source configuration type"),modelValue:e.remoteSelectPre.form.sourceConfigType,"onUpdate:modelValue":l[35]||(l[35]=a=>e.remoteSelectPre.form.sourceConfigType=a),type:"radio","input-attr":{border:!0,content:{crud:i(o)("crud.crud.Fast configuration with generated controllers and models"),custom:i(o)("crud.crud.Custom configuration")}}},null,8,["label","modelValue","input-attr"]),e.remoteSelectPre.form.sourceConfigType=="crud"?(s(),f(p,{prop:"controllerFile",type:"select",label:i(o)("crud.crud.Controller position"),modelValue:e.remoteSelectPre.form.controllerFile,"onUpdate:modelValue":l[36]||(l[36]=a=>e.remoteSelectPre.form.controllerFile=a),placeholder:i(o)("crud.crud.Please select the controller of the data table"),key:"controller-file"+JSON.stringify(e.remoteSelectPre.controllerFileList),"input-attr":{content:e.remoteSelectPre.controllerFileList},"block-help":i(o)("crud.crud.The remote pull-down will request the corresponding controller to obtain data, so it is recommended that you create the CRUD of the associated table")},null,8,["label","modelValue","placeholder","input-attr","block-help"])):C("",!0),(s(),f(p,{prop:e.remoteSelectPre.form.sourceConfigType=="crud"?"modelFile":"",type:"select",label:i(o)("crud.crud.Data Model Location"),modelValue:e.remoteSelectPre.form.modelFile,"onUpdate:modelValue":l[37]||(l[37]=a=>e.remoteSelectPre.form.modelFile=a),placeholder:i(o)("crud.crud.Please select the data model location of the data table"),key:"model-file"+JSON.stringify(e.remoteSelectPre.modelFileList),"input-attr":{content:e.remoteSelectPre.modelFileList},"block-help":e.remoteSelectPre.form.sourceConfigType=="crud"?"":i(o)("crud.crud.If it is left blank, the model of the associated table will be generated automatically If the table already has a model, it is recommended to select it to avoid repeated generation")},null,8,["prop","label","modelValue","placeholder","input-attr","block-help"])),e.table.databaseConnection&&e.remoteSelectPre.form.modelFile?(s(),f(T,{key:2,label:i(o)("Database connection")},{default:c(()=>[d(He,{size:"large",type:"danger"},{default:c(()=>[w(g(e.table.databaseConnection),1)]),_:1}),m("div",Al,[m("div",null,g(i(o)("crud.crud.Check model class",{connection:e.table.databaseConnection})),1),m("div",null,g(i(o)("crud.crud.There is no connection attribute in model class")),1)])]),_:1},8,["label"])):C("",!0),e.remoteSelectPre.form.sourceConfigType=="custom"?(s(),f(p,{key:3,prop:"remoteUrl",label:i(o)("crud.crud.api url"),type:"string",modelValue:e.remoteSelectPre.form.remoteUrl,"onUpdate:modelValue":l[38]||(l[38]=a=>e.remoteSelectPre.form.remoteUrl=a),placeholder:i(o)("crud.crud.api url example")},null,8,["label","modelValue","placeholder"])):C("",!0),e.remoteSelectPre.form.sourceConfigType=="custom"?(s(),f(p,{key:4,label:i(o)("crud.crud.remote-primary-table-alias"),type:"string",modelValue:e.remoteSelectPre.form.primaryTableAlias,"onUpdate:modelValue":l[39]||(l[39]=a=>e.remoteSelectPre.form.primaryTableAlias=a),"block-help":i(o)("crud.crud.If the remote interface query involves associated query of multiple tables, enter the alias of the primary data table here")},{append:c(()=>[w("."+g(e.remoteSelectPre.form.pk),1)]),_:1},8,["label","modelValue","block-help"])):C("",!0),d(T,{label:i(o)("Reminder")},{default:c(()=>[m("div",Ml,g(i(o)("crud.crud.Design remote select tips")),1)]),_:1},8,["label"])])),[[re,e.loading.remoteSelect]])]),_:1},8,["model","rules"])),[[re,e.remoteSelectPre.loading]]):C("",!0)])]),_:1})]),_:1},8,["model-value","title"]),d(ae,{onClose:W,class:"ba-operate-dialog confirm-generate-dialog","model-value":e.confirmGenerate.show,title:i(o)("crud.crud.Confirm CRUD code generation")},{footer:c(()=>[m("div",ql,[d(n,{onClick:W},{default:c(()=>[w(g(t.$t("Cancel")),1)]),_:1}),N((s(),f(n,{loading:e.loading.generate,onClick:Q,type:"primary"},{default:c(()=>[w(g(i(o)("crud.crud.Continue building")),1)]),_:1},8,["loading"])),[[L]])])]),default:c(()=>[m("div",Gl,[e.confirmGenerate.controller?(s(),f(oe,{key:0,title:i(o)("crud.crud.The controller already exists Continuing to generate will automatically overwrite the existing code!"),center:"",type:"error"},null,8,["title"])):C("",!0),ge()?(s(),f(oe,{key:1,title:i(o)("crud.crud.The data table already exists Continuing to generate will automatically delete the original table and create a new one!"),class:"mt-10",center:"",type:"error"},null,8,["title"])):C("",!0),e.confirmGenerate.menu?(s(),f(oe,{key:2,title:i(o)("crud.crud.The menu rule with the same name already exists The menu and permission node will not be created in this generation"),class:"mt-10",center:"",type:"error"},null,8,["title"])):C("",!0)])]),_:1},8,["model-value","title"]),d(ae,{class:"ba-operate-dialog design-change-log-dialog",width:"20%",modelValue:e.showDesignChangeLog,"onUpdate:modelValue":l[42]||(l[42]=a=>e.showDesignChangeLog=a)},{header:c(()=>[N((s(),b("div",null,[w(g(i(o)("crud.crud.Data table design changes preview")),1)])),[[We,[".design-change-log-dialog",".el-dialog__header"]]])]),footer:c(()=>[m("div",zl,[d(n,{onClick:l[41]||(l[41]=a=>e.showDesignChangeLog=!1)},{default:c(()=>[w(g(i(o)("Confirm")),1)]),_:1})])]),default:c(()=>[d(we,{"max-height":"400px"},{default:c(()=>[e.table.designChange.length?(s(),b(S,{key:0},[d(Je,{class:"design-change-log-timeline"},{default:c(()=>[(s(!0),b(S,null,P(e.table.designChange,(a,u)=>(s(),f(Ye,{key:u,type:ze(a.type),hollow:!0,"hide-timestamp":!0},{default:c(()=>[m("div",Bl,[d(Ce,{modelValue:a.sync,"onUpdate:modelValue":V=>a.sync=V,label:je(a),size:"small"},null,8,["modelValue","onUpdate:modelValue","label"])])]),_:2},1032,["type"]))),128))]),_:1}),m("span",$l,g(i(o)("crud.crud.designChangeTips")),1)],64)):(s(),b("div",jl,"暂无表设计变更")),d(p,{label:i(o)("crud.crud.tableReBuild"),class:"rebuild-form-item",modelValue:e.table.rebuild,"onUpdate:modelValue":l[40]||(l[40]=a=>e.table.rebuild=a),type:"radio","input-attr":{border:!0,content:{No:i(o)("crud.crud.No"),Yes:i(o)("crud.crud.Yes")}},"block-help":i(o)("crud.crud.tableReBuildBlockHelp")},null,8,["label","modelValue","input-attr","block-help"])]),_:1})]),_:1},8,["modelValue"])])}}}),at=dl(Ol,[["__scopeId","data-v-a87f69b1"]]);export{at as default};
