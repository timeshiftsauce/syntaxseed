import{e as E,u as xe,J as oe,K as re,M as Te,_ as z,x as ve,n as H,h as J,l as ye,S as pe,i as ne,N as Ge,O as Se,z as He,L as Q,P as Qe,Q as et,w as Ue,R as Ie,f as Le,T as we,r as Oe,B as De,U as tt,g as ot,V as We,W as at,X as lt}from"./index-C3V9u2Ed.js";import{u as Be,t as D}from"./terminal-Dkg7p0iR.js";import{e as I,h as M,o as u,T as V,N as T,s as e,j as ae,U as w,m as p,_ as F,a8 as O,X as q,W as le,O as n,l as o,k as d,H as nt,a as K,f as Me,z as X,$ as ie,M as ee,a7 as ue,B as ze,ab as Re,Z as W,ac as qe,ad as st,a0 as Ke,n as te,a5 as se,V as $,ae as rt,Y as Ne,af as Pe,ag as ut,ah as Ve,ai as Xe,aa as it,A as ct,aj as dt,i as Fe}from"./vue-DdIC1N8d.js";import{_ as mt,D as ft}from"./darkSwitch-CDgP8xtK.js";import{c as pt,g as Z,o as Ee,a as $e,r as _e,s as _t,b as vt}from"./router-C2pHQmD-.js";import{I as yt,s as me}from"./index-BGiSXJig.js";import{t as gt}from"./useDark-DOjMKlrz.js";import{a as bt,i as Ct}from"./index-BASh_3MO.js";import{F as fe}from"./index-1wj2obtz.js";import"./index-B2cyAL5t.js";const ht={class:"layout-logo"},kt={key:0,class:"logo-img",src:mt,alt:"logo"},wt=I({__name:"logo",setup(A){O(f=>({adf9ae48:e(t).layout.layoutMode!="Streamline"?e(t).getColorVal("menuTopBarBackground"):"transparent"}));const t=E(),l=xe(),i=function(){t.layout.shrink&&!t.layout.menuCollapse&&pt(),t.setLayout("menuCollapse",!t.layout.menuCollapse),oe.set(re,{layoutMode:t.layout.layoutMode,menuCollapse:t.layout.menuCollapse}),setTimeout(()=>{Te()},350)};return(f,s)=>{const g=p("Icon");return u(),M("div",ht,[e(t).layout.menuCollapse?V("",!0):(u(),M("img",kt)),e(t).layout.menuCollapse?V("",!0):(u(),M("div",{key:1,style:ae({color:e(t).getColorVal("menuActiveColor")}),class:"website-name"},w(e(l).siteName),5)),e(t).layout.layoutMode!="Streamline"?(u(),T(g,{key:2,onClick:i,name:e(t).layout.menuCollapse?"fa fa-indent":"fa fa-dedent",class:F([e(t).layout.menuCollapse?"unfold":"","fold"]),color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["name","class","color"])):V("",!0)])}}}),je=z(wt,[["__scopeId","data-v-38fd2478"]]),Tt=I({__name:"menuTree",props:{menus:{default:()=>[]},extends:{default:()=>({level:1})}},setup(A){O(s=>({"3a8d44ae":e(l).getColorVal("menuActiveBackground")}));const{t}=ve.useI18n(),l=E(),i=A,f=s=>{var g,m;if(((g=i.extends)==null?void 0:g.position)=="horizontal"&&i.extends.level<=1&&((m=s.children)!=null&&m.length)){const c=$e(s.children);c?Ee(c):nt({type:"error",message:t("utils.No child menu to jump to!")})}};return(s,g)=>{const m=p("Icon"),c=p("menu-tree",!0),v=p("el-sub-menu"),b=p("el-menu-item");return u(!0),M(q,null,le(i.menus,r=>(u(),M(q,null,[r.children&&r.children.length>0?(u(),T(v,{onClick:a=>f(r),index:e(Z)(r),key:e(Z)(r)},{title:n(()=>{var a,y,S,_;return[o(m,{color:e(l).getColorVal("menuColor"),name:(a=r.meta)!=null&&a.icon?(y=r.meta)==null?void 0:y.icon:e(l).layout.menuDefaultIcon},null,8,["color","name"]),d("span",null,w((S=r.meta)!=null&&S.title?(_=r.meta)==null?void 0:_.title:s.$t("noTitle")),1)]}),default:n(()=>[o(c,{extends:{...i.extends,level:i.extends.level+1},menus:r.children},null,8,["extends","menus"])]),_:2},1032,["onClick","index"])):(u(),T(b,{onClick:a=>e(Ee)(r),index:e(Z)(r),key:e(Z)(r)},{default:n(()=>{var a,y,S,_;return[o(m,{color:e(l).getColorVal("menuColor"),name:(a=r.meta)!=null&&a.icon?(y=r.meta)==null?void 0:y.icon:e(l).layout.menuDefaultIcon},null,8,["color","name"]),d("span",null,w((S=r.meta)!=null&&S.title?(_=r.meta)==null?void 0:_.title:s.$t("noTitle")),1)]}),_:2},1032,["onClick","index"]))],64))),256)}}}),ge=z(Tt,[["__scopeId","data-v-cddda623"]]),xt=I({__name:"menuVertical",setup(A){O(c=>({d753e0ae:s.value,"5bf275a0":e(t).getColorVal("menuBackground"),"6edfe262":e(t).getColorVal("menuColor"),"5c05d5ae":e(t).getColorVal("menuActiveColor")}));const t=E(),l=H(),i=ee(),f=K({defaultActive:""}),s=Me(()=>{let c=0;return t.layout.menuShowTopBar&&(c=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+c)+"px)":"calc(100vh - "+c+"px)"}),g=c=>{const v=l.getTabsViewDataByRoute(c);v&&(f.defaultActive=Z(v,v.meta.matched))},m=()=>{setTimeout(()=>{var v;let c=document.querySelector(".el-menu.layouts-menu-vertical li.is-active");c&&((v=J.value)==null||v.setScrollTop(c.offsetTop))},500)};return X(()=>{g(i),m()}),ie(c=>{g(c)}),(c,v)=>{const b=p("el-menu"),r=p("el-scrollbar");return u(),T(r,{ref_key:"layoutMenuScrollbarRef",ref:J,class:"vertical-menus-scrollbar"},{default:n(()=>[o(b,{class:"layouts-menu-vertical","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":f.defaultActive,collapse:e(t).layout.menuCollapse,ref_key:"layoutMenuRef",ref:ye},{default:n(()=>[o(ge,{menus:e(l).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}}),St=I({__name:"menuVerticalChildren",setup(A){O(v=>({c0bf70ee:g.value,"630b1d10":e(t).getColorVal("menuBackground"),cb276a22:e(t).getColorVal("menuColor"),"6183b949":e(t).getColorVal("menuActiveColor")}));const t=E(),l=H(),i=ee(),f=ue("layoutMenuScrollbarRef"),s=K({defaultActive:"",routeChildren:[]}),g=Me(()=>{let v=0;return t.layout.menuShowTopBar&&(v=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+v)+"px)":"calc(100vh - "+v+"px)"}),m=v=>{const b=l.getTabsViewDataByRoute(v);b&&(s.defaultActive=Z(b,b.meta.matched));let r=l.getTabsViewDataByRoute(v,"above");r?r.children&&r.children.length>0?s.routeChildren=r.children:s.routeChildren=[r]:s.routeChildren||(s.routeChildren=l.state.tabsViewRoutes)},c=()=>{setTimeout(()=>{var b;let v=document.querySelector(".el-menu.layouts-menu-vertical-children li.is-active");v&&((b=f.value)==null||b.setScrollTop(v.offsetTop))},500)};return X(()=>{m(i),c()}),ie(v=>{m(v)}),(v,b)=>{const r=p("el-menu"),a=p("el-scrollbar");return u(),T(a,{ref_key:"layoutMenuScrollbarRef",ref:f,class:"children-vertical-menus-scrollbar"},{default:n(()=>[o(r,{class:"layouts-menu-vertical-children","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":s.defaultActive,collapse:e(t).layout.menuCollapse,ref_key:"layoutMenuRef",ref:ye},{default:n(()=>[s.routeChildren.length>0?(u(),T(ge,{key:0,menus:s.routeChildren},null,8,["menus"])):V("",!0)]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}}),Bt=I({name:"layout/aside",__name:"aside",setup(A){O(f=>({e1fe1608:i.value,"77a1f906":e(pe)}));const t=E(),l=H(),i=Me(()=>t.menuWidth());return(f,s)=>{const g=p("el-aside");return e(l).state.tabFullScreen?V("",!0):(u(),T(g,{key:0,class:F("layout-aside-"+e(t).layout.layoutMode+" "+(e(t).layout.shrink?"shrink":""))},{default:n(()=>[e(t).layout.menuShowTopBar?(u(),T(je,{key:0})):V("",!0),e(t).layout.layoutMode=="Double"?(u(),T(St,{key:1})):(u(),T(xt,{key:2}))]),_:1},8,["class"]))}}}),Ae=z(Bt,[["__scopeId","data-v-f9e86dcd"]]);function Ye(){if(!ze())throw new Error("useCurrentInstance() can only be used inside setup() or functional components!");const{appContext:A}=ze();return{proxy:A.config.globalProperties}}const Mt={class:"el-dropdown-menu"},Rt=["onClick"],Vt=I({__name:"index",props:{width:{default:150},items:{default:()=>[]}},emits:["menuClick","hideContextmenu"],setup(A,{expose:t,emit:l}){O(b=>({"5c84d21e":e(pe)}));const i=A,f=l,s=K({show:!1,axis:{x:0,y:0},sourceData:null,showArrow:!0,arrowAxis:10}),g={click:()=>{},scroll:()=>{},keydown:()=>{}},m=(b,r)=>{s.showArrow=!0,s.sourceData=b;const a=document.documentElement.clientHeight-r.y-(i.items.length*40+20),y=document.documentElement.clientWidth-r.x-(i.width+20);a<0&&(r.y+=a,s.showArrow=!1),y<0&&(r.x+=y,s.showArrow=!1),s.axis=r,s.show=!0,g.click=ne(document,"click",c),g.scroll=ne(document,"scroll",c),g.keydown=ne(document,"keydown",S=>{S.key==="Escape"&&c()})},c=()=>{s.show=!1;for(const b in g)g[b]();f("hideContextmenu")},v=b=>{b.disabled||(b.sourceData=st(s.sourceData),f("menuClick",b))};return t({onShowContextmenu:m,onHideContextmenu:c}),(b,r)=>{const a=p("Icon");return u(),T(Re,{name:"el-zoom-in-center"},{default:n(()=>[W((u(),M("div",{class:"el-popper is-pure is-light el-dropdown__popper ba-contextmenu",style:ae(`top: ${s.axis.y+5}px;left: ${s.axis.x-14}px;width:${i.width}px`),key:Math.random(),"aria-hidden":"false","data-popper-placement":"bottom"},[d("ul",Mt,[(u(!0),M(q,null,le(i.items,(y,S)=>(u(),M("li",{key:S,class:F(["el-dropdown-menu__item",y.disabled?"is-disabled":""]),tabindex:"-1",onClick:_=>v(y)},[o(a,{size:"12",name:y.icon},null,8,["name"]),d("span",null,w(y.label),1)],10,Rt))),128))]),s.showArrow?(u(),M("span",{key:0,class:"el-popper__arrow",style:ae({left:`${s.arrowAxis}px`})},null,4)):V("",!0)],4)),[[qe,s.show]])]),_:1})}}}),$t=z(Vt,[["__scopeId","data-v-dfe3b2ef"]]),At=["onClick","onContextmenu"],It=I({__name:"tabs",setup(A,{expose:t}){O(C=>({"324bc03e":e(f).getColorVal("headerBarTabColor"),da32de8a:e(f).getColorVal("headerBarTabActiveColor"),"29dffebc":e(f).layout.layoutMode=="Default"?"none":e(f).getColorVal("headerBarBackground")}));const l=ee(),i=Ke(),f=E(),s=H(),{proxy:g}=Ye(),m=Ge(),c=ue("contextmenuRef"),v=ue("tabScrollbarRef"),b=K({contextmenuItems:[{name:"refresh",label:"重新加载",icon:"fa fa-refresh"},{name:"close",label:"关闭标签",icon:"fa fa-times"},{name:"fullScreen",label:"当前标签全屏",icon:"el-icon-FullScreen"},{name:"closeOther",label:"关闭其他标签",icon:"fa fa-minus"},{name:"closeAll",label:"关闭全部标签",icon:"fa fa-stop"}]}),r=K({width:"0",transform:"translateX(0px)"}),a=C=>{i.push(C.fullPath)},y=function(C){if(!C)return!1;if(r.width=C.clientWidth+"px",r.transform=`translateX(${C.offsetLeft}px)`,v.value){let B=C.offsetLeft+C.clientWidth-v.value.clientWidth;C.offsetLeft<v.value.scrollLeft?v.value.scrollTo(C.offsetLeft,0):B>v.value.scrollLeft&&v.value.scrollTo(B,0)}},S=()=>{const C=s.state.tabsView.slice(-1)[0];C?i.push(C.fullPath):i.push(He)},_=C=>{var B,x;s._closeTab(C),g.eventBus.emit("onTabViewClose",C),((B=s.state.activeRoute)==null?void 0:B.fullPath)===C.fullPath?S():(s._setActiveRoute(s.state.activeRoute),te(()=>{y(m.value[s.state.activeIndex])})),(x=c.value)==null||x.onHideContextmenu()},R=C=>{var B;s._closeTabs(C),s._setActiveRoute(C),((B=s.state.activeRoute)==null?void 0:B.fullPath)!==l.fullPath&&i.push(C.fullPath)},L=C=>{var x;let B=$e(s.state.tabsViewRoutes);if(C&&B&&B.path==C.fullPath)return R(C);if(B&&B.path==((x=s.state.activeRoute)==null?void 0:x.fullPath))return R(s.state.activeRoute);s._closeTabs(!1),B&&_e(B.path)},j=(C,B)=>{var h;b.contextmenuItems[0].disabled=l.fullPath!==C.fullPath,b.contextmenuItems[4].disabled=b.contextmenuItems[3].disabled=s.state.tabsView.length==1;const{clientX:x,clientY:N}=B;(h=c.value)==null||h.onShowContextmenu(C,{x,y:N})},P=C=>{const{name:B,sourceData:x}=C;if(x)switch(B){case"refresh":g.eventBus.emit("onTabViewRefresh",x);break;case"close":_(x);break;case"closeOther":R(x);break;case"closeAll":L(x);break;case"fullScreen":l.fullPath!==x.fullPath&&i.push(x.fullPath),s.setFullScreen(!0);break}},U=function(C){s._addTab(C),s._setActiveRoute(C),te(()=>{y(m.value[s.state.activeIndex])})};return ie(async C=>{U(C)}),X(()=>{U(i.currentRoute.value),v.value&&new Se(v.value)}),t({closeAllTab:L,closeTabByPath:C=>{for(const B in s.state.tabsView)if(s.state.tabsView[B].fullPath==C){_(s.state.tabsView[B]);break}},updateTabTitle:(C,B)=>{s._updateTabTitle(C,B),te(()=>{y(m.value[s.state.activeIndex])})}}),(C,B)=>{const x=p("Icon");return u(),M("div",{class:"nav-tabs",ref_key:"tabScrollbarRef",ref:v},[(u(!0),M(q,null,le(e(s).state.tabsView,(N,h)=>(u(),M("div",{onClick:k=>a(N),onContextmenu:se(k=>j(N,k),["prevent"]),class:F(["ba-nav-tab",e(s).state.activeIndex==h?"active":""]),ref_for:!0,ref:e(m).set,key:h},[$(w(N.meta.title)+" ",1),o(Re,{onAfterLeave:B[0]||(B[0]=k=>y(e(m)[e(s).state.activeIndex])),name:"el-fade-in"},{default:n(()=>[W(o(x,{class:"close-icon",onClick:se(k=>_(N),["stop"]),size:"15",name:"el-icon-Close"},null,8,["onClick"]),[[qe,e(s).state.tabsView.length>1]])]),_:2},1024)],42,At))),128)),d("div",{style:ae(r),class:"nav-tabs-active-box"},null,4),o($t,{ref_key:"contextmenuRef",ref:c,items:b.contextmenuItems,onMenuClick:P},null,8,["items"])],512)}}}),Ze=z(It,[["__scopeId","data-v-e50bae95"]]),Lt={class:"layout-config-drawer"},Dt={class:"layout-mode-styles-box"},zt={class:"layout-mode-box-style"},Nt={class:"layout-mode-style-name"},Pt={class:"layout-mode-style-name"},Ft={class:"layout-mode-style-name"},Et={class:"layout-mode-style-name"},Ht={class:"layout-config-global"},Ut={class:"layout-config-aside"},Ot={class:"layout-config-aside"},Wt={class:"ba-center"},qt=I({__name:"config",setup(A){const{t}=ve.useI18n(),l=E(),i=H(),f=Ke(),s=(r,a)=>{l.setLayout(a,r)},g=(r,a)=>{if(r===null)return;const y=l.layout[a];l.layout.isDark?y[1]=r:y[0]=r,l.setLayout(a,y)},m=r=>{oe.set(re,{layoutMode:r,menuCollapse:l.layout.menuCollapse}),l.setLayoutMode(r)},c=(r,a)=>{l.setLayout(a,r);const y=i.state.tabsViewRoutes;i.setTabsViewRoutes([]),te(()=>{i.setTabsViewRoutes(y)})},v=()=>{l.setLayout("showDrawer",!1)},b=()=>{Q.remove(Qe),oe.remove(re),f.go(0)};return(r,a)=>{const y=p("el-divider"),S=p("el-col"),_=p("el-row"),R=p("el-form-item"),L=p("el-option"),j=p("el-select"),P=p("el-color-picker"),U=p("el-switch"),Y=p("el-input"),G=p("el-button"),C=p("el-popconfirm"),B=p("el-form"),x=p("el-scrollbar"),N=p("el-drawer");return u(),M("div",Lt,[o(N,{"model-value":e(l).layout.showDrawer,title:e(t)("layouts.Layout configuration"),size:"310px",onClose:v},{default:n(()=>[o(x,{class:"layout-mode-style-scrollbar"},{default:n(()=>[o(B,{model:e(l).layout},{default:n(()=>[d("div",Dt,[o(y,{"border-style":"dashed"},{default:n(()=>[$(w(e(t)("layouts.Layout mode")),1)]),_:1}),d("div",zt,[o(_,{class:"layout-mode-box-style-row",gutter:10},{default:n(()=>[o(S,{span:12},{default:n(()=>[d("div",{onClick:a[0]||(a[0]=h=>m("Default")),class:F(["layout-mode-style default",e(l).layout.layoutMode=="Default"?"active":""])},[a[21]||(a[21]=d("div",{class:"layout-mode-style-box"},[d("div",{class:"layout-mode-style-aside"}),d("div",{class:"layout-mode-style-container-box"},[d("div",{class:"layout-mode-style-header"}),d("div",{class:"layout-mode-style-container"})])],-1)),d("div",Nt,w(e(t)("layouts.default")),1)],2)]),_:1}),o(S,{span:12},{default:n(()=>[d("div",{onClick:a[1]||(a[1]=h=>m("Classic")),class:F(["layout-mode-style classic",e(l).layout.layoutMode=="Classic"?"active":""])},[a[22]||(a[22]=d("div",{class:"layout-mode-style-box"},[d("div",{class:"layout-mode-style-aside"}),d("div",{class:"layout-mode-style-container-box"},[d("div",{class:"layout-mode-style-header"}),d("div",{class:"layout-mode-style-container"})])],-1)),d("div",Pt,w(e(t)("layouts.classic")),1)],2)]),_:1})]),_:1}),o(_,{gutter:10},{default:n(()=>[o(S,{span:12},{default:n(()=>[d("div",{onClick:a[2]||(a[2]=h=>m("Streamline")),class:F(["layout-mode-style streamline",e(l).layout.layoutMode=="Streamline"?"active":""])},[a[23]||(a[23]=d("div",{class:"layout-mode-style-box"},[d("div",{class:"layout-mode-style-container-box"},[d("div",{class:"layout-mode-style-header"}),d("div",{class:"layout-mode-style-container"})])],-1)),d("div",Ft,w(e(t)("layouts.Single column")),1)],2)]),_:1}),o(S,{span:12},{default:n(()=>[d("div",{onClick:a[3]||(a[3]=h=>m("Double")),class:F(["layout-mode-style double",e(l).layout.layoutMode=="Double"?"active":""])},[a[24]||(a[24]=d("div",{class:"layout-mode-style-box"},[d("div",{class:"layout-mode-style-aside"}),d("div",{class:"layout-mode-style-container-box"},[d("div",{class:"layout-mode-style-header"}),d("div",{class:"layout-mode-style-container"})])],-1)),d("div",Et,w(e(t)("layouts.Double column")),1)],2)]),_:1})]),_:1})]),o(y,{"border-style":"dashed"},{default:n(()=>[$(w(e(t)("layouts.overall situation")),1)]),_:1}),d("div",Ht,[o(R,{size:"large",label:e(t)("layouts.Dark mode")},{default:n(()=>[o(ft,{onClick:a[4]||(a[4]=h=>e(gt)())})]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Background page switching animation")},{default:n(()=>[o(j,{onChange:a[5]||(a[5]=h=>s(h,"mainAnimation")),"model-value":e(l).layout.mainAnimation,placeholder:e(t)("layouts.Please select an animation name")},{default:n(()=>[o(L,{label:"slide-right",value:"slide-right"}),o(L,{label:"slide-left",value:"slide-left"}),o(L,{label:"el-fade-in-linear",value:"el-fade-in-linear"}),o(L,{label:"el-fade-in",value:"el-fade-in"}),o(L,{label:"el-zoom-in-center",value:"el-zoom-in-center"}),o(L,{label:"el-zoom-in-top",value:"el-zoom-in-top"}),o(L,{label:"el-zoom-in-bottom",value:"el-zoom-in-bottom"})]),_:1},8,["model-value","placeholder"])]),_:1},8,["label"])]),o(y,{"border-style":"dashed"},{default:n(()=>[$(w(e(t)("layouts.sidebar")),1)]),_:1}),d("div",Ut,[o(R,{label:e(t)("layouts.Side menu bar background color")},{default:n(()=>[o(P,{onChange:a[6]||(a[6]=h=>g(h,"menuBackground")),"model-value":e(l).getColorVal("menuBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu text color")},{default:n(()=>[o(P,{onChange:a[7]||(a[7]=h=>g(h,"menuColor")),"model-value":e(l).getColorVal("menuColor")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu active item background color")},{default:n(()=>[o(P,{onChange:a[8]||(a[8]=h=>g(h,"menuActiveBackground")),"model-value":e(l).getColorVal("menuActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu active item text color")},{default:n(()=>[o(P,{onChange:a[9]||(a[9]=h=>g(h,"menuActiveColor")),"model-value":e(l).getColorVal("menuActiveColor")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Show side menu top bar (logo bar)")},{default:n(()=>[o(U,{onChange:a[10]||(a[10]=h=>s(h,"menuShowTopBar")),"model-value":e(l).layout.menuShowTopBar},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu top bar background color")},{default:n(()=>[o(P,{onChange:a[11]||(a[11]=h=>g(h,"menuTopBarBackground")),"model-value":e(l).getColorVal("menuTopBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu width (when expanded)")},{default:n(()=>[o(Y,{onInput:a[12]||(a[12]=h=>s(h,"menuWidth")),type:"number",step:10,"model-value":e(l).layout.menuWidth},{append:n(()=>a[25]||(a[25]=[$("px")])),_:1},8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu default icon")},{default:n(()=>[o(yt,{onChange:a[13]||(a[13]=h=>c(h,"menuDefaultIcon")),"model-value":e(l).layout.menuDefaultIcon},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu horizontal collapse")},{default:n(()=>[o(U,{onChange:a[14]||(a[14]=h=>s(h,"menuCollapse")),"model-value":e(l).layout.menuCollapse},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu accordion")},{default:n(()=>[o(U,{onChange:a[15]||(a[15]=h=>s(h,"menuUniqueOpened")),"model-value":e(l).layout.menuUniqueOpened},null,8,["model-value"])]),_:1},8,["label"])]),o(y,{"border-style":"dashed"},{default:n(()=>[$(w(e(t)("layouts.Top bar")),1)]),_:1}),d("div",Ot,[o(R,{label:e(t)("layouts.Top bar background color")},{default:n(()=>[o(P,{onChange:a[16]||(a[16]=h=>g(h,"headerBarBackground")),"model-value":e(l).getColorVal("headerBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Top bar text color")},{default:n(()=>[o(P,{onChange:a[17]||(a[17]=h=>g(h,"headerBarTabColor")),"model-value":e(l).getColorVal("headerBarTabColor")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Background color when hovering over the top bar")},{default:n(()=>[o(P,{onChange:a[18]||(a[18]=h=>g(h,"headerBarHoverBackground")),"model-value":e(l).getColorVal("headerBarHoverBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Top bar menu active item background color")},{default:n(()=>[o(P,{onChange:a[19]||(a[19]=h=>g(h,"headerBarTabActiveBackground")),"model-value":e(l).getColorVal("headerBarTabActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Top bar menu active item text color")},{default:n(()=>[o(P,{onChange:a[20]||(a[20]=h=>g(h,"headerBarTabActiveColor")),"model-value":e(l).getColorVal("headerBarTabActiveColor")},null,8,["model-value"])]),_:1},8,["label"])]),o(C,{onConfirm:b,title:e(t)("layouts.Are you sure you want to restore all configurations to the default values?")},{reference:n(()=>[d("div",Wt,[o(G,{class:"w80",type:"info"},{default:n(()=>[$(w(e(t)("layouts.Restore default")),1)]),_:1})])]),_:1},8,["title"])])]),_:1},8,["model"])]),_:1})]),_:1},8,["model-value","title"])])}}}),Kt=z(qt,[["__scopeId","data-v-2fcf2bed"]]),Xt={class:"command"},jt={class:"task-opt"},Yt=["onClick"],Zt={class:"terminal-buttons"},Jt={class:"config-buttons"},Gt=I({__name:"index",setup(A){const{t}=ve.useI18n(),l=Be(),i=ue("terminalScrollbarRef"),f=K({registryLoading:!1,registryLoadingType:"npm",packageManagerLoading:!1}),s=r=>{let a=t("terminal.unknown"),y="info";switch(r){case D.Waiting:a=t("terminal.Waiting for execution"),y="info";break;case D.Connecting:a=t("terminal.Connecting"),y="warning";break;case D.Executing:a=t("terminal.Executing"),y="warning";break;case D.Success:a=t("terminal.Successful execution"),y="success";break;case D.Failed:a=t("terminal.Execution failed"),y="danger";break;case D.Unknown:a=t("terminal.Unknown execution result"),y="danger";break}return{statusText:a,statusType:y}},g=(r,a,y=!0,S="",_=()=>{})=>{a?l.addTaskPM(r,y,S,_):l.addTask(r,y,S,_),te(()=>{i.value&&i.value.wrapRef&&i.value.setScrollTop(i.value.wrapRef.scrollHeight)})},m=()=>{Pe.confirm(t("terminal.Are you sure you want to republish?"),t("Reminder"),{confirmButtonText:t("Confirm"),cancelButtonText:t("Cancel"),type:"warning"}).then(()=>{g("web-build",!0,!0,"",()=>{})})},c=r=>{f.packageManagerLoading=!0,et({manager:r}).then(a=>{a.code==1&&l.changePackageManager(r)}).finally(()=>{f.packageManagerLoading=!1})},v=(r,a)=>{const y=a=="npm"?l.state.npmRegistry:l.state.composerRegistry;l.changeRegistry(r,a),f.registryLoading=!0,f.registryLoadingType=a,l.addTask(`set-${a}-registry.${r}`,!1,"",S=>{f.registryLoading=!1,(S==D.Failed||S==D.Unknown)&&Pe.confirm(t("terminal.Failed to modify the source command, Please try again manually"),t("Reminder"),{confirmButtonText:t("Confirm"),showCancelButton:!1,type:"warning"}).then(()=>{l.changeRegistry(y,a)})})},b=r=>{let a={};return r=="npm"?a={npm:"npm",taobao:"taobao",tencent:"tencent"}:r=="composer"&&(a={composer:"composer",huawei:"huawei",aliyun:"aliyun",tencent:"tencent",kkame:"kkame"}),l.state[r=="npm"?"npmRegistry":"composerRegistry"]=="unknown"&&(a.unknown=t("Unknown")),a};return X(()=>{l.init()}),(r,a)=>{const y=p("el-alert"),S=p("el-tag"),_=p("el-button"),R=p("Icon"),L=p("el-card"),j=p("el-timeline-item"),P=p("el-timeline"),U=p("el-empty"),Y=p("el-dropdown-item"),G=p("el-dropdown-menu"),C=p("el-dropdown"),B=p("el-dialog"),x=p("el-form"),N=Ne("blur"),h=Ne("loading");return u(),M("div",null,[o(B,{modelValue:e(l).state.show,"onUpdate:modelValue":a[6]||(a[6]=k=>e(l).state.show=k),title:e(t)("terminal.Terminal"),class:"ba-terminal-dialog main-dialog"},{default:n(()=>[o(e(rt),{ref_key:"terminalScrollbarRef",ref:i,"max-height":500,class:"terminal-scrollbar"},{default:n(()=>[e(l).state.phpDevelopmentServer?V("",!0):(u(),T(y,{key:0,class:"terminal-warning-alert",title:e(t)("terminal.The current terminal is not running under the installation service, and some commands may not be executed"),type:"error"},null,8,["title"])),e(l).state.taskList.length?(u(),T(P,{key:1,class:"terminal-timeline"},{default:n(()=>[(u(!0),M(q,null,le(e(l).state.taskList,(k,ce)=>(u(),T(j,{key:ce,class:F(["task-item","task-status-"+k.status]),type:s(k.status).statusType,center:"",timestamp:k.createTime,placement:"top"},{default:n(()=>[o(L,null,{default:n(()=>[d("div",null,[o(S,{type:s(k.status).statusType},{default:n(()=>[$(w(s(k.status).statusText),1)]),_:2},1032,["type"]),(k.status==e(D).Failed||k.status==e(D).Unknown)&&k.blockOnFailure?(u(),T(S,{key:0,class:"block-on-failure-tag",type:"warning"},{default:n(()=>[$(w(e(t)("terminal.Failure to execute this command will block the execution of the queue")),1)]),_:1})):V("",!0),k.status==e(D).Executing||k.status==e(D).Connecting?(u(),T(S,{key:1,class:"block-on-failure-tag",type:"danger"},{default:n(()=>[$(w(e(t)("terminal.Do not refresh the browser")),1)]),_:1})):V("",!0),d("span",Xt,w(k.command),1),d("div",jt,[k.status==e(D).Failed||k.status==e(D).Unknown?W((u(),T(_,{key:0,title:e(t)("Retry"),size:"small",type:"warning",icon:"el-icon-RefreshRight",circle:"",onClick:de=>e(l).retryTask(ce)},null,8,["title","onClick"])),[[N]]):V("",!0),W(o(_,{onClick:de=>e(l).delTask(ce),title:e(t)("Delete"),size:"small",type:"danger",icon:"el-icon-Delete",circle:""},null,8,["onClick","title"]),[[N]])])]),k.status!=e(D).Waiting?(u(),M(q,{key:0},[k.status!=e(D).Connecting&&k.status!=e(D).Executing?(u(),M("div",{key:0,onClick:de=>e(l).setTaskShowMessage(ce),class:"toggle-message-display"},[d("span",null,w(e(t)("terminal.Command run log")),1),o(R,{name:k.showMessage?"el-icon-ArrowUp":"el-icon-ArrowDown",size:"16",color:"#909399"},null,8,["name"])],8,Yt)):V("",!0),k.status==e(D).Connecting||k.status==e(D).Executing||k.status>e(D).Executing&&k.showMessage?(u(),M("div",{key:1,class:F(["exec-message","exec-message-"+k.uuid])},[(u(!0),M(q,null,le(k.message,(de,Je)=>(u(),M("pre",{key:Je,class:"message-item"},w(de),1))),128))],2)):V("",!0)],64)):V("",!0)]),_:2},1024)]),_:2},1032,["class","type","timestamp"]))),128))]),_:1})):(u(),T(U,{key:2,"image-size":80,description:e(t)("terminal.No mission yet")},null,8,["description"]))]),_:1},512),d("div",Zt,[W((u(),T(_,{class:"terminal-menu-item",icon:"el-icon-MagicStick",onClick:a[0]||(a[0]=k=>g("test",!0,!1))},{default:n(()=>[$(w(e(t)("terminal.Test command")),1)]),_:1})),[[N]]),o(C,{class:"terminal-menu-item"},{dropdown:n(()=>[o(G,null,{default:n(()=>[e(l).state.packageManager!="none"?(u(),T(Y,{key:0,onClick:a[1]||(a[1]=k=>g("web-install",!0))},{default:n(()=>[$(w(e(l).state.packageManager)+" run install ",1)]),_:1})):V("",!0),o(Y,{onClick:a[2]||(a[2]=k=>g("composer.update",!1))},{default:n(()=>a[9]||(a[9]=[$("composer update")])),_:1})]),_:1})]),default:n(()=>[W((u(),T(_,{icon:"el-icon-Download"},{default:n(()=>[$(w(e(t)("terminal.Install dependent packages")),1)]),_:1})),[[N]])]),_:1}),W((u(),T(_,{class:"terminal-menu-item",icon:"el-icon-Sell",onClick:a[3]||(a[3]=k=>m())},{default:n(()=>[$(w(e(t)("terminal.Republish")),1)]),_:1})),[[N]]),W((u(),T(_,{class:"terminal-menu-item",icon:"el-icon-Delete",onClick:a[4]||(a[4]=k=>e(l).clearSuccessTask())},{default:n(()=>[$(w(e(t)("terminal.Clean up task list")),1)]),_:1})),[[N]]),W((u(),T(_,{class:"terminal-menu-item",icon:"el-icon-Tools",onClick:a[5]||(a[5]=k=>e(l).toggleConfigDialog())},{default:n(()=>[$(w(e(t)("terminal.Terminal settings")),1)]),_:1})),[[N]])])]),_:1},8,["modelValue","title"]),o(B,{onClose:a[8]||(a[8]=k=>e(l).toggleConfigDialog(!1)),"model-value":e(l).state.showConfig,class:"ba-terminal-dialog",title:e(t)("terminal.Terminal settings")},{default:n(()=>[o(x,{"label-position":"left","label-width":"140"},{default:n(()=>[W((u(),T(fe,{label:"NPM "+e(t)("terminal.Source"),"model-value":e(l).state.npmRegistry,key:e(l).state.npmRegistry,type:"select","input-attr":{border:!0,content:b("npm"),teleported:!1,onChange:k=>v(k,"npm")}},null,8,["label","model-value","input-attr"])),[[h,f.registryLoading&&f.registryLoadingType=="npm"]]),W((u(),T(fe,{label:"Composer "+e(t)("terminal.Source"),"model-value":e(l).state.composerRegistry,key:e(l).state.composerRegistry,type:"select","input-attr":{border:!0,content:b("composer"),teleported:!1,onChange:k=>v(k,"composer")}},null,8,["label","model-value","input-attr"])),[[h,f.registryLoading&&f.registryLoadingType=="composer"]]),W(o(fe,{label:e(t)("terminal.NPM package manager"),"model-value":e(l).state.packageManager,type:"select","input-attr":{border:!0,content:{npm:"NPM",cnpm:"CNPM",pnpm:"PNPM",yarn:"YARN",ni:"NI",none:e(t)("terminal.Manual execution")},teleported:!1,onChange:k=>c(k)},tip:e(t)("terminal.NPM package manager tip")},null,8,["label","model-value","input-attr","tip"]),[[h,f.packageManagerLoading]]),o(fe,{label:e(t)("terminal.Clear successful task"),"model-value":e(l).state.automaticCleanupTask,type:"radio","input-attr":{border:!0,content:{0:e(t)("Disable"),1:e(t)("Enable")},onChange:e(l).changeAutomaticCleanupTask},tip:e(t)("terminal.Clear successful task tip")},null,8,["label","model-value","input-attr","tip"])]),_:1}),d("div",Jt,[o(_,{onClick:a[7]||(a[7]=k=>e(l).toggleConfigDialog(!1))},{default:n(()=>[$(w(e(t)("terminal.Back to terminal")),1)]),_:1})])]),_:1},8,["model-value","title"])])}}}),Qt=z(Gt,[["__scopeId","data-v-4a3fef97"]]),eo={class:"el-popover__title"},to={class:"reload-hot-server-content"},oo={class:"reload-hot-server-buttons"},ao={class:"nav-menu-item"},lo={class:"admin-name"},no={class:"admin-info-base"},so={class:"admin-info-other"},ro={class:"admin-info-name"},uo={class:"admin-info-lasttime"},io={class:"admin-info-footer"},co=I({__name:"navMenus",setup(A){O(S=>({"7903e7c6":e(i).getColorVal("headerBarBackground"),ec1340b4:e(i).getColorVal("headerBarTabColor"),"6c737bc0":e(i).getColorVal("headerBarHoverBackground")}));const{t}=ve.useI18n(),l=Ue(),i=E(),f=Be(),s=xe(),g=ue("reloadHotServerPopover"),m=K({isFullScreen:!1,currentNavMenu:"",showLayoutDrawer:!1,showAdminInfoPopover:!1}),c=(S,_)=>{m.currentNavMenu=S?_:""},v=S=>{var _;S=="cancel"&&((_=g.value)==null||_.hide())},b=()=>{if(!me.isEnabled)return ut.warning(t("layouts.Full screen is not supported")),!1;me.toggle(),me.onchange(()=>{m.isFullScreen=me.isFullscreen})},r=()=>{m.showAdminInfoPopover=!1,_e({name:"routine/adminInfo"})},a=()=>{bt().then(()=>{Q.remove(we),Oe.go(0)})},y=S=>{if(S=="storage"||S=="all"){const _=Q.get(we),R=Q.get(De);if(oe.clear(),Q.clear(),Q.set(we,_),Q.set(De,R),S=="storage")return}tt(S).then(()=>{})};return(S,_)=>{const R=p("el-button"),L=p("Icon"),j=p("el-popover"),P=p("router-link"),U=p("el-dropdown-item"),Y=p("el-dropdown-menu"),G=p("el-dropdown"),C=p("el-badge"),B=p("el-avatar");return u(),M("div",{class:F(["nav-menus",e(i).layout.layoutMode])},[e(Ie).dirtyFile?(u(),T(j,{key:0,ref_key:"reloadHotServerPopover",ref:g,onShow:_[2]||(_[2]=x=>c(!0,"reloadHotServer")),onHide:_[3]||(_[3]=x=>c(!1,"reloadHotServer")),width:360},{reference:n(()=>[d("div",{class:F(["nav-menu-item",m.currentNavMenu=="reloadHotServer"?"hover":""])},[o(L,{color:"var(--el-color-danger)",class:"nav-menu-icon",name:"el-icon-Warning",size:"18"})],2)]),default:n(()=>[d("div",null,[d("div",eo,w(e(t)("vite.Reload hot server title")),1),d("div",to,[d("p",null,[d("span",null,w(e(t)("vite.Reload hot server tips 1")),1),d("span",null,"【"+w(e(t)(`vite.Close type ${e(Ie).closeType}`))+"】",1),d("span",null,w(e(t)("vite.Reload hot server tips 2")),1)]),d("p",null,w(e(t)("vite.Reload hot server tips 3")),1),d("div",oo,[o(R,{onClick:_[0]||(_[0]=x=>v("cancel"))},{default:n(()=>[$(w(e(t)("vite.Later")),1)]),_:1}),o(R,{onClick:_[1]||(_[1]=x=>v("reload")),type:"primary"},{default:n(()=>[$(w(e(t)("vite.Restart hot update")),1)]),_:1})])])])]),_:1},512)):V("",!0),o(P,{class:"h100",target:"_blank",title:e(t)("Home"),to:"/"},{default:n(()=>[d("div",ao,[o(L,{color:e(i).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-Monitor",size:"18"},null,8,["color"])])]),_:1},8,["title"]),o(G,{onVisibleChange:_[4]||(_[4]=x=>c(x,"lang")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:n(()=>[o(Y,{class:"dropdown-menu-box"},{default:n(()=>[(u(!0),M(q,null,le(e(i).lang.langArray,x=>(u(),T(U,{key:x.name,onClick:N=>e(ot)(x.name)},{default:n(()=>[$(w(x.value),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:n(()=>[d("div",{class:F(["nav-menu-item pt2",m.currentNavMenu=="lang"?"hover":""])},[o(L,{color:e(i).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-lang",size:"18"},null,8,["color"])],2)]),_:1}),d("div",{onClick:b,class:F(["nav-menu-item",m.isFullScreen?"hover":""])},[m.isFullScreen?(u(),T(L,{key:0,color:e(i).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-full-screen-cancel",size:"18"},null,8,["color"])):(u(),T(L,{key:1,color:e(i).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-FullScreen",size:"18"},null,8,["color"]))],2),e(l).super?(u(),M("div",{key:1,onClick:_[5]||(_[5]=x=>e(f).toggle()),class:"nav-menu-item pt2"},[o(C,{"is-dot":e(f).state.showDot},{default:n(()=>[o(L,{color:e(i).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-terminal",size:"26"},null,8,["color"])]),_:1},8,["is-dot"])])):V("",!0),e(l).super?(u(),T(G,{key:2,onVisibleChange:_[9]||(_[9]=x=>c(x,"clear")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:n(()=>[o(Y,{class:"dropdown-menu-box"},{default:n(()=>[o(U,{onClick:_[6]||(_[6]=x=>y("tp"))},{default:n(()=>[$(w(e(t)("utils.Clean up system cache")),1)]),_:1}),o(U,{onClick:_[7]||(_[7]=x=>y("storage"))},{default:n(()=>[$(w(e(t)("utils.Clean up browser cache")),1)]),_:1}),o(U,{onClick:_[8]||(_[8]=x=>y("all")),divided:""},{default:n(()=>[$(w(e(t)("utils.Clean up all cache")),1)]),_:1})]),_:1})]),default:n(()=>[d("div",{class:F(["nav-menu-item",m.currentNavMenu=="clear"?"hover":""])},[o(L,{color:e(i).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-Delete",size:"18"},null,8,["color"])],2)]),_:1})):V("",!0),e(s).userInitialize?(u(),T(j,{key:3,onShow:_[10]||(_[10]=x=>c(!0,"adminInfo")),onHide:_[11]||(_[11]=x=>c(!1,"adminInfo")),placement:"bottom-end","hide-after":0,width:260,trigger:"click","popper-class":"admin-info-box",visible:m.showAdminInfoPopover,"onUpdate:visible":_[12]||(_[12]=x=>m.showAdminInfoPopover=x)},{reference:n(()=>[d("div",{class:F(["admin-info",m.currentNavMenu=="adminInfo"?"hover":""])},[o(B,{size:25,src:e(Le)(e(l).avatar)},null,8,["src"]),d("div",lo,w(e(l).nickname),1)],2)]),default:n(()=>[d("div",null,[d("div",no,[o(B,{size:70,src:e(Le)(e(l).avatar)},null,8,["src"]),d("div",so,[d("div",ro,w(e(l).nickname),1),d("div",uo,w(e(l).last_login_time),1)])]),d("div",io,[o(R,{onClick:r,type:"primary",plain:""},{default:n(()=>[$(w(e(t)("layouts.Profile")),1)]),_:1}),o(R,{onClick:a,type:"danger",plain:""},{default:n(()=>[$(w(e(t)("layouts.Logout")),1)]),_:1})])])]),_:1},8,["visible"])):V("",!0),d("div",{onClick:_[13]||(_[13]=x=>e(i).setLayout("showDrawer",!0)),class:"nav-menu-item"},[o(L,{color:e(i).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"fa fa-cogs",size:"18"},null,8,["color"])]),o(Kt),o(Qt)],2)}}}),be=z(co,[["__scopeId","data-v-ca897a6a"]]),mo={class:"nav-bar"},fo=I({__name:"default",setup(A){O(l=>({"67abd059":e(t).getColorVal("headerBarTabColor"),f0bff19a:e(t).getColorVal("headerBarTabActiveColor"),"00d66b4c":e(t).getColorVal("headerBarTabActiveBackground")}));const t=E();return(l,i)=>(u(),M("div",mo,[o(Ze,{ref_key:"layoutNavTabsRef",ref:We},null,512),o(be)]))}}),po=z(fo,[["__scopeId","data-v-528ceb49"]]),_o={class:"nav-bar"},vo={key:0,class:"unfold"},yo=I({__name:"classic",setup(A){O(i=>({"737cd666":e(t).getColorVal("headerBarBackground"),"0af9a26d":e(t).getColorVal("headerBarTabColor"),"88760b72":e(t).getColorVal("headerBarTabActiveColor"),"7cfea179":e(t).getColorVal("headerBarHoverBackground"),e21b7690:e(t).getColorVal("headerBarTabActiveBackground")}));const t=E(),l=()=>{_t("ba-aside-menu-shade",()=>{t.setLayout("menuCollapse",!0)}),t.setLayout("menuCollapse",!1)};return(i,f)=>{const s=p("Icon");return u(),M("div",_o,[e(t).layout.shrink&&e(t).layout.menuCollapse?(u(),M("div",vo,[o(s,{onClick:l,name:"fa fa-indent",color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["color"])])):V("",!0),e(t).layout.shrink?V("",!0):(u(),T(Ze,{key:1,ref_key:"layoutNavTabsRef",ref:We},null,512)),o(be)])}}}),go=z(yo,[["__scopeId","data-v-952ef580"]]),bo={class:"layouts-menu-horizontal"},Co={key:0,class:"menu-horizontal-logo"},ho=I({__name:"menuHorizontal",setup(A){O(m=>({baec6338:e(t).getColorVal("headerBarHoverBackground"),"93f1f226":e(t).getColorVal("menuBackground"),a09a2a1c:e(t).getColorVal("menuColor"),"6e050b0c":e(t).getColorVal("menuActiveColor"),"3b3231da":e(t).getColorVal("menuActiveBackground")}));const t=E(),l=H(),i=ee(),f=K({defaultActive:""}),s=m=>{const c=l.getTabsViewDataByRoute(m);c&&(f.defaultActive=Z(c,c.meta.matched))},g=()=>{setTimeout(()=>{var c;let m=document.querySelector(".el-menu.menu-horizontal li.is-active");m&&((c=J.value)==null||c.setScrollLeft(m.offsetLeft))},500)};return X(()=>{s(i),g(),new Se(J.value.wrapRef)}),ie(m=>{s(m)}),(m,c)=>{const v=p("el-menu"),b=p("el-scrollbar");return u(),M("div",bo,[e(t).layout.menuShowTopBar?(u(),M("div",Co,[o(je)])):V("",!0),o(b,{ref_key:"layoutMenuScrollbarRef",ref:J,class:"horizontal-menus-scrollbar"},{default:n(()=>[o(v,{ref_key:"layoutMenuRef",ref:ye,class:"menu-horizontal",mode:"horizontal","default-active":f.defaultActive},{default:n(()=>[o(ge,{extends:{position:"horizontal",level:1},menus:e(l).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["default-active"])]),_:1},512),o(be)])}}}),ko=z(ho,[["__scopeId","data-v-6b34e328"]]),wo={class:"layouts-menu-horizontal-double"},To=I({__name:"double",setup(A){O(m=>({"0a252609":e(t).getColorVal("menuBackground"),"22e66b54":e(t).getColorVal("menuColor"),c4aa6120:e(t).getColorVal("menuActiveColor"),"5b3f7da2":e(t).getColorVal("menuActiveBackground")}));const t=E(),l=H(),i=ee(),f=K({defaultActive:""}),s=m=>{const c=l.getTabsViewDataByRoute(m);c&&(f.defaultActive=Z(c,c.meta.matched))},g=()=>{setTimeout(()=>{var c;let m=document.querySelector(".el-menu.menu-horizontal li.is-active");m&&((c=J.value)==null||c.setScrollLeft(m.offsetLeft))},500)};return X(()=>{s(i),g(),new Se(J.value.wrapRef)}),ie(m=>{s(m)}),(m,c)=>{const v=p("el-menu"),b=p("el-scrollbar");return u(),M("div",wo,[o(b,{ref_key:"layoutMenuScrollbarRef",ref:J,class:"double-menus-scrollbar"},{default:n(()=>[o(v,{ref_key:"layoutMenuRef",ref:ye,class:"menu-horizontal",mode:"horizontal","default-active":f.defaultActive},{default:n(()=>[o(ge,{extends:{position:"horizontal",level:1},menus:e(l).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["default-active"])]),_:1},512),o(be)])}}}),xo=z(To,[["__scopeId","data-v-1dd56bd1"]]),So=I({name:"layout/header",components:{DefaultNavBar:po,ClassicNavBar:go,StreamlineNavBar:ko,DoubleNavBar:xo},__name:"header",setup(A){const t=E(),l=H();return(i,f)=>{const s=p("el-header");return e(l).state.tabFullScreen?V("",!0):(u(),T(s,{key:0,class:"layout-header"},{default:n(()=>[(u(),T(Ve(e(t).layout.layoutMode+"NavBar")))]),_:1}))}}}),Ce=z(So,[["__scopeId","data-v-9014eea9"]]),Bo=I({name:"layout/main",__name:"main",setup(A){const{proxy:t}=Ye(),l=ee(),i=E(),f=H(),s=K({componentKey:l.fullPath,keepAliveComponentNameList:[]}),g=function(c){if(c){if(s.keepAliveComponentNameList.find(b=>b===c))return;s.keepAliveComponentNameList.push(c)}},m=()=>{var c;if(f.state.activeRoute){const v=f.getTabsViewDataByRoute(f.state.activeRoute);v&&typeof((c=v.meta)==null?void 0:c.keepalive)=="string"&&g(v.meta.keepalive)}};return Xe(()=>{t.eventBus.on("onTabViewRefresh",c=>{s.keepAliveComponentNameList=s.keepAliveComponentNameList.filter(v=>c.meta.keepalive!==v),s.componentKey="",te(()=>{s.componentKey=c.fullPath,g(c.meta.keepalive)})}),t.eventBus.on("onTabViewClose",c=>{s.keepAliveComponentNameList=s.keepAliveComponentNameList.filter(v=>c.meta.keepalive!==v)})}),it(()=>{t.eventBus.off("onTabViewRefresh"),t.eventBus.off("onTabViewClose")}),X(()=>{m()}),ct(()=>l.fullPath,()=>{s.componentKey=l.fullPath,m()}),(c,v)=>{const b=p("router-view"),r=p("el-scrollbar"),a=p("el-main");return u(),T(a,{class:"layout-main"},{default:n(()=>[o(r,{class:"layout-main-scrollbar",style:ae(e(lt)),ref_key:"layoutMainScrollbarRef",ref:at},{default:n(()=>[o(b,null,{default:n(({Component:y})=>[o(Re,{name:e(i).layout.mainAnimation,mode:"out-in"},{default:n(()=>[(u(),T(dt,{include:s.keepAliveComponentNameList},[(u(),T(Ve(y),{key:s.componentKey}))],1032,["include"]))]),_:2},1032,["name"])]),_:1})]),_:1},8,["style"])]),_:1})}}}),he=z(Bo,[["__scopeId","data-v-93dd102f"]]),Mo=["title"],Ro=I({__name:"closeFullScreen",setup(A){O(g=>({"3c4d29c4":e(pe),"32e1e4fc":e(pe)-1}));const t=H(),l=K({closeBoxTop:20});X(()=>{setTimeout(()=>{l.closeBoxTop=-30},300)});const i=()=>{l.closeBoxTop=20},f=()=>{l.closeBoxTop=-30},s=()=>{t.setFullScreen(!1)};return(g,m)=>{const c=p("Icon");return u(),M("div",{title:g.$t("layouts.Exit full screen"),onMouseover:se(i,["stop"]),onMouseout:se(f,["stop"])},[d("div",{onClick:se(s,["stop"]),class:"close-full-screen",style:ae({top:l.closeBoxTop+"px"})},[o(c,{name:"el-icon-Close"})],4),m[0]||(m[0]=d("div",{class:"close-full-screen-on"},null,-1))],40,Mo)}}}),ke=z(Ro,[["__scopeId","data-v-e7b01c02"]]),Vo=I({__name:"default",setup(A){const t=H();return(l,i)=>{const f=p("el-container");return u(),M(q,null,[o(f,{class:"layout-container"},{default:n(()=>[o(Ae),o(f,{class:"content-wrapper"},{default:n(()=>[o(Ce),o(he)]),_:1})]),_:1}),e(t).state.tabFullScreen?(u(),T(ke,{key:0})):V("",!0)],64)}}}),$o=z(Vo,[["__scopeId","data-v-59d252c1"]]),Ao=I({__name:"classic",setup(A){const t=H();return(l,i)=>{const f=p("el-container");return u(),M(q,null,[o(f,{class:"layout-container"},{default:n(()=>[o(Ae),o(f,{class:"content-wrapper"},{default:n(()=>[o(Ce),o(he)]),_:1})]),_:1}),e(t).state.tabFullScreen?(u(),T(ke,{key:0})):V("",!0)],64)}}}),Io=z(Ao,[["__scopeId","data-v-fb349671"]]),Lo=I({__name:"streamline",setup(A){const t=H();return(l,i)=>{const f=p("el-container");return u(),M(q,null,[o(f,{class:"layout-container"},{default:n(()=>[o(f,{class:"content-wrapper"},{default:n(()=>[o(Ce),o(he)]),_:1})]),_:1}),e(t).state.tabFullScreen?(u(),T(ke,{key:0})):V("",!0)],64)}}}),Do=z(Lo,[["__scopeId","data-v-fcdc1bd3"]]),zo=I({__name:"double",setup(A){const t=H();return(l,i)=>{const f=p("el-container");return u(),M(q,null,[o(f,{class:"layout-container"},{default:n(()=>[o(Ae),o(f,{class:"content-wrapper"},{default:n(()=>[o(Ce),o(he)]),_:1})]),_:1}),e(t).state.tabFullScreen?(u(),T(ke,{key:0})):V("",!0)],64)}}}),No=z(zo,[["__scopeId","data-v-d08319bd"]]),jo=I({components:{Default:$o,Classic:Io,Streamline:Do,Double:No},__name:"index",setup(A){const t=Be(),l=H(),i=E(),f=ee(),s=xe(),g=Ue(),m=K({autoMenuCollapseLock:!1});X(()=>{if(!g.token)return Oe.push({name:"adminLogin"});c(),Te(),ne(window,"resize",Te)}),Xe(()=>{v(),ne(window,"resize",v)});const c=()=>{Ct().then(b=>{if(s.dataFill(b.data.siteConfig),t.changePackageManager(b.data.terminal.npmPackageManager),t.changePHPDevelopmentServer(b.data.terminal.phpDevelopmentServer),s.setInitialize(!0),Fe(b.data.adminInfo)||(g.dataFill(b.data.adminInfo),s.setUserInitialize(!0)),b.data.menus){if(vt(b.data.menus),f.params.to){const a=JSON.parse(f.params.to);if(a.path!=He){let y=Fe(a.query)?{}:a.query;_e({path:a.path,query:y});return}}let r=$e(l.state.tabsViewRoutes);r&&_e(r.path)}})},v=()=>{let b={layoutMode:i.layout.layoutMode,menuCollapse:i.layout.menuCollapse},r=oe.get(re);if(r||oe.set(re,b),document.body.clientWidth<1024)m.autoMenuCollapseLock||(m.autoMenuCollapseLock=!0,i.setLayout("menuCollapse",!0)),i.setLayout("shrink",!0),i.setLayoutMode("Classic");else{m.autoMenuCollapseLock=!1;let y=r||b;i.setLayout("menuCollapse",y.menuCollapse),i.setLayout("shrink",!1),i.setLayoutMode(y.layoutMode)}};return(b,r)=>(u(),T(Ve(e(i).layout.layoutMode)))}});export{jo as default};
