import{e as W,a7 as q,al as A,a as B,m as d,Y as v,N as s,o as i,O as u,Z as k,k as c,j as U,s as e,_ as $,T as b,a6 as w,l as a,V as f,U as n,a5 as C,h as j}from"./vue-DdIC1N8d.js";import{e as K,x as O,_ as Y}from"./index-C3V9u2Ed.js";import{F as h}from"./index-1wj2obtz.js";import{b as y}from"./validate-BCdw8ftN.js";import"./index-BGiSXJig.js";import"./index-B2cyAL5t.js";const Z={class:"title"},G={class:"block-help"},H={class:"block-help"},J={class:"block-help component-path-tips"},Q={class:"block-help"},X=W({__name:"popupForm",setup(ee){const x=K(),g=q("formRef"),l=A("baTable"),{t}=O.useI18n(),I=B({title:[y({name:"required",title:t("auth.rule.Rule title")})],pid:[{validator:(S,o,m)=>o&&parseInt(o)==parseInt(l.form.items.id)?m(new Error(t("auth.rule.The superior menu rule cannot be the rule itself"))):m(),trigger:"blur"}],name:[y({name:"required",title:t("auth.rule.Rule name")})],path:[y({name:"required",title:t("auth.rule.Routing path")})],url:[y({name:"required",message:t("auth.rule.Link address")}),y({name:"url",message:t("auth.rule.Please enter the correct URL")})]});return(S,o)=>{const m=d("el-radio"),T=d("el-radio-group"),p=d("el-form-item"),_=d("el-input"),V=d("el-option"),P=d("el-select"),E=d("el-form"),F=d("el-scrollbar"),R=d("el-button"),N=d("el-dialog"),M=v("drag"),z=v("zoom"),D=v("loading"),L=v("blur");return i(),s(N,{class:"ba-operate-dialog",top:"5vh","close-on-click-modal":!1,"model-value":["Add","Edit"].includes(e(l).form.operate),onClose:e(l).toggleForm,"destroy-on-close":!0},{header:u(()=>[k((i(),j("div",Z,[f(n(e(l).form.operate?e(t)(e(l).form.operate):""),1)])),[[M,[".ba-operate-dialog",".el-dialog__header"]],[z,".ba-operate-dialog"]])]),footer:u(()=>[c("div",{style:U("width: calc(100% - "+e(l).form.labelWidth/1.8+"px)")},[a(R,{onClick:o[17]||(o[17]=r=>e(l).toggleForm(""))},{default:u(()=>[f(n(e(t)("Cancel")),1)]),_:1}),k((i(),s(R,{loading:e(l).form.submitLoading,onClick:o[18]||(o[18]=r=>e(l).onSubmit(e(g))),type:"primary"},{default:u(()=>[f(n(e(l).form.operateIds&&e(l).form.operateIds.length>1?e(t)("Save and edit next item"):e(t)("Save")),1)]),_:1},8,["loading"])),[[L]])],4)]),default:u(()=>[k((i(),s(F,{class:"ba-table-form-scrollbar"},{default:u(()=>[c("div",{class:$(["ba-operate-form","ba-"+e(l).form.operate+"-form"]),style:U(e(x).layout.shrink?"":"width: calc(100% - "+e(l).form.labelWidth/2+"px)")},[e(l).form.loading?b("",!0):(i(),s(E,{key:0,ref_key:"formRef",ref:g,onKeyup:o[16]||(o[16]=w(r=>e(l).onSubmit(e(g)),["enter"])),model:e(l).form.items,"label-position":e(x).layout.shrink?"top":"right","label-width":e(l).form.labelWidth+"px",rules:I},{default:u(()=>[a(h,{type:"remoteSelect",prop:"pid",label:e(t)("auth.rule.Superior menu rule"),modelValue:e(l).form.items.pid,"onUpdate:modelValue":o[0]||(o[0]=r=>e(l).form.items.pid=r),placeholder:e(t)("Click select"),"input-attr":{params:{isTree:!0},field:"title",remoteUrl:e(l).api.actionUrl.get("index"),emptyValues:["",null,void 0,0],valueOnClear:0}},null,8,["label","modelValue","placeholder","input-attr"]),a(p,{label:e(t)("auth.rule.Rule type")},{default:u(()=>[a(T,{modelValue:e(l).form.items.type,"onUpdate:modelValue":o[1]||(o[1]=r=>e(l).form.items.type=r)},{default:u(()=>[a(m,{class:"ba-el-radio",value:"route",border:!0},{default:u(()=>[f(n(e(t)("user.rule.Normal routing")),1)]),_:1}),a(m,{class:"ba-el-radio",value:"menu_dir",border:!0},{default:u(()=>[f(n(e(t)("user.rule.Member center menu contents")),1)]),_:1}),a(m,{class:"ba-el-radio",value:"menu",border:!0},{default:u(()=>[f(n(e(t)("user.rule.Member center menu items")),1)]),_:1}),a(m,{class:"ba-el-radio",value:"nav",border:!0},{default:u(()=>[f(n(e(t)("user.rule.Top bar menu items")),1)]),_:1}),a(m,{class:"ba-el-radio",value:"button",border:!0},{default:u(()=>[f(n(e(t)("user.rule.Page button")),1)]),_:1}),a(m,{class:"ba-el-radio",value:"nav_user_menu",border:!0},{default:u(()=>[f(n(e(t)("user.rule.Top bar user dropdown")),1)]),_:1})]),_:1},8,["modelValue"]),c("div",G,n(e(t)("user.rule.Type "+e(l).form.items.type+" tips")),1)]),_:1},8,["label"]),a(p,{prop:"title",label:e(t)("auth.rule.Rule title")},{default:u(()=>[a(_,{modelValue:e(l).form.items.title,"onUpdate:modelValue":o[2]||(o[2]=r=>e(l).form.items.title=r),type:"string",placeholder:e(t)("Please input field",{field:e(t)("auth.rule.Rule title")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(p,{prop:"name",label:e(t)("auth.rule.Rule name")},{default:u(()=>[a(_,{modelValue:e(l).form.items.name,"onUpdate:modelValue":o[3]||(o[3]=r=>e(l).form.items.name=r),type:"string",placeholder:e(t)("user.rule.English name")},null,8,["modelValue","placeholder"]),c("div",H,n(e(t)("auth.rule.It will be registered as the web side routing name and used as the server side API authentication")),1)]),_:1},8,["label"]),e(l).form.items.type!="button"?(i(),s(p,{key:0,prop:"path",label:e(t)("auth.rule.Routing path")},{default:u(()=>[a(_,{modelValue:e(l).form.items.path,"onUpdate:modelValue":o[4]||(o[4]=r=>e(l).form.items.path=r),type:"string",placeholder:e(t)("user.rule.Web side routing path")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):b("",!0),e(l).form.items.type!="button"?(i(),s(h,{key:1,type:"icon",label:e(t)("auth.rule.Rule Icon"),modelValue:e(l).form.items.icon,"onUpdate:modelValue":o[5]||(o[5]=r=>e(l).form.items.icon=r),"input-attr":{showIconName:!0}},null,8,["label","modelValue"])):b("",!0),["menu_dir","button","route"].includes(e(l).form.items.type)?b("",!0):(i(),s(h,{key:2,label:e(t)("auth.rule.Menu type"),modelValue:e(l).form.items.menu_type,"onUpdate:modelValue":o[6]||(o[6]=r=>e(l).form.items.menu_type=r),type:"radio","input-attr":{border:!0,content:{tab:e(t)("auth.rule.Menu type tab"),link:e(t)("auth.rule.Menu type link (offsite)"),iframe:"Iframe"}}},null,8,["label","modelValue","input-attr"])),!["menu_dir","button","route"].includes(e(l).form.items.type)&&e(l).form.items.menu_type!="tab"?(i(),s(p,{key:3,prop:"url",label:e(t)("auth.rule.Link address")},{default:u(()=>[a(_,{modelValue:e(l).form.items.url,"onUpdate:modelValue":o[7]||(o[7]=r=>e(l).form.items.url=r),type:"string",placeholder:e(t)("auth.rule.Please enter the URL address of the link or iframe")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):b("",!0),e(l).form.items.type=="route"||!["menu_dir","button"].includes(e(l).form.items.type)&&e(l).form.items.menu_type=="tab"?(i(),s(p,{key:4,label:e(t)("auth.rule.Component path")},{default:u(()=>[a(_,{modelValue:e(l).form.items.component,"onUpdate:modelValue":o[8]||(o[8]=r=>e(l).form.items.component=r),type:"string",placeholder:e(t)("user.rule.For example, if you add account/overview as a route only")},null,8,["modelValue","placeholder"]),c("div",J,n(e(t)("user.rule.Component path tips")),1)]),_:1},8,["label"])):b("",!0),!["menu_dir","button"].includes(e(l).form.items.type)&&e(l).form.items.menu_type=="tab"?(i(),s(p,{key:5,label:e(t)("auth.rule.Extended properties")},{default:u(()=>[a(P,{class:"w100",modelValue:e(l).form.items.extend,"onUpdate:modelValue":o[9]||(o[9]=r=>e(l).form.items.extend=r),placeholder:e(t)("Please select field",{field:e(t)("auth.rule.Extended properties")})},{default:u(()=>[a(V,{label:e(t)("auth.rule.none"),value:"none"},null,8,["label"]),a(V,{label:e(t)("auth.rule.Add as route only"),value:"add_rules_only"},null,8,["label"]),a(V,{label:e(t)("auth.rule.Add as menu only"),value:"add_menu_only"},null,8,["label"])]),_:1},8,["modelValue","placeholder"]),c("div",Q,n(e(t)("user.rule.Web side component path, please start with /src, such as: /src/views/frontend/index")),1)]),_:1},8,["label"])):b("",!0),["menu_dir","menu","nav_user_menu"].includes(e(l).form.items.type)?b("",!0):(i(),s(h,{key:6,label:e(t)("user.rule.no_login_valid"),modelValue:e(l).form.items.no_login_valid,"onUpdate:modelValue":o[10]||(o[10]=r=>e(l).form.items.no_login_valid=r),type:"radio","input-attr":{border:!0,content:{0:e(t)("user.rule.no_login_valid 0"),1:e(t)("user.rule.no_login_valid 1")}},"block-help":e(t)("user.rule.no_login_valid tips")},null,8,["label","modelValue","input-attr","block-help"])),a(p,{label:e(t)("auth.rule.Rule comments")},{default:u(()=>[a(_,{onKeyup:[o[11]||(o[11]=w(C(()=>{},["stop"]),["enter"])),o[12]||(o[12]=w(C(r=>e(l).onSubmit(e(g)),["ctrl"]),["enter"]))],modelValue:e(l).form.items.remark,"onUpdate:modelValue":o[13]||(o[13]=r=>e(l).form.items.remark=r),type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:e(t)("Please input field",{field:e(t)("auth.rule.Rule comments")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(p,{label:e(t)("auth.rule.Rule weight")},{default:u(()=>[a(_,{modelValue:e(l).form.items.weigh,"onUpdate:modelValue":o[14]||(o[14]=r=>e(l).form.items.weigh=r),type:"number",placeholder:e(t)("auth.rule.Please enter the weight of menu rule (sort by)")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(h,{label:e(t)("State"),modelValue:e(l).form.items.status,"onUpdate:modelValue":o[15]||(o[15]=r=>e(l).form.items.status=r),type:"radio","input-attr":{border:!0,content:{0:e(t)("Disable"),1:e(t)("Enable")}}},null,8,["label","modelValue","input-attr"])]),_:1},8,["model","label-position","label-width","rules"]))],6)]),_:1})),[[D,e(l).form.loading]])]),_:1},8,["model-value","onClose"])}}}),ne=Y(X,[["__scopeId","data-v-4880a8ab"]]);export{ne as default};
